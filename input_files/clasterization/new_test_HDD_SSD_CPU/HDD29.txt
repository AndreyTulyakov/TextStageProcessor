Обзор двухдисковых NAS: ASUS TS mini, QNAP TS-212 и Synology DS212j 
Вступление

Кризис на рынке жестких дисков постепенно проходит, так что статьи на эту тему уже не должны выглядеть кощунственно. И, как вы уже могли догадаться, данный обзор посвящен сетевым хранилищам. Энтузиасты обычно относятся к ним скептически: мол, дешевые варианты слишком медленные и глючные, многого не умеют, а вместо дорогих лучше собрать Mini-ITX компьютер на Atom’e. Я постараюсь показать, в каких случаях это верно, а в каких NAS будет объективно лучшим выбором, поскольку волею судьбы ко мне попали три двухдисковые модели.

400x352 18 KB. Big one: 1500x1321 134 KB

*DVD болванка полезна для оценки габаритов .

Участники тестирования – аппаратная часть

Технические характеристики

 	
ASUS
TS mini
	
QNAP
TS-212
	
Synology
DS212j
Процессор	
Intel Atom N280, 1.66 ГГц
	
Marvell 6281, 1.2 ГГц
	
Marvell 6281, 1.2 ГГц
Оперативная
память	
2 Гбайта DDR2
	
256 МБайт DDR2
	
256 МБайт DDR2
Число
дисков	
2 x 3.5”
	
2 x 3.5”
	
2 x 3.5”
Операционная
система	
Windows Home Server
	
QNAP NAS Firmware 3.5.2
	
DSM 3.2
Порты
USB	
6 x USB 2.0
	
3 x USB 2.0
	
2 x USB 2.0
Порты
eSATA	
2 x SATA-II
	
нет
	
нет
Порты
LAN	
1 x Gigabit Ethernet
	
1 x Gigabit Ethernet
	
1 x Gigabit Ethernet
Поддерживаемые
типы RAID	
WHS storage pool
	
0, 1, JBOD
	
0, 1, JBOD, SHR
Вентиляторы

	
2 x 50 мм
	
1 x 60 мм
	
1 x 92 мм
Блок
питания	
19 В, 90 Вт
	
12 В, 60 Вт
	
12 В, 65 Вт
Размер
(ВxШxГ), мм	
245 x 96 x 204
	
165 x 85 x 218
	
165 x 100 x 225
Вес
(без дисков), кг	
2.7
	
0.91
	
0.94
Цена
в рознице,
руб.	
15000, с дисками 2 x 1 Тбайт
	
9000
	
9500

ASUS TS mini

Самый большой и самый старый из тестируемых NAS – мини-сервер ASUS. Данная модель была представлена в конце 2009 года, с тех пор прошло уже более двух лет и ее жизненный цикл почти завершен. Поэтому смысл обзора не в том, чтобы дать совет, покупать ее или нет, а в том, чтобы пробудить интерес к необычной платформе. Сердцем системы является не какой-нибудь ARM, а Intel Atom, операционная система - не вариация на тему Linux, а Windows Home Server, который создан на базе Windows Server 2003.

394x400 26 KB. Big one: 1476x1500 231 KB

Внушительных размеров коробка помимо самого устройства включает в себя внешний блок питания с кабелем, патч-корд, руководство пользователя, плакат со схемой подключения и три диска: ПО для повседневного использования, для восстановления компьютеров из резервной копии и для восстановления NAS.

400x313 26 KB. Big one: 1500x1175 111 KB

Блок питания похож на варианты, используемые для ноутбуков, с разъемом IEC C5-C6. Напряжение 19 В и сила тока до 4.74 А обеспечивают до 90 Вт мощности. И пусть в нормальной работе этот потенциал остается невостребованным даже на половину, он будет полезен при раскрутке дисков (которые могут потреблять в этот момент до 30 Вт) и питании внешних USB устройств.

328x400 13 KB. Big one: 1231x1500 115 KB

200x148 6 KB. Big one: 1000x739 47 KB

Сервер представляет собой стильную черную башню из пластика, который собирает всю пыль и отпечатки пальцев. Продувка корпуса осуществляется снизу вверх.

229x400 11 KB. Big one: 858x1500 90 KB

165x400 8 KB. Big one: 620x1500 73 KB 170x400 13 KB. Big one: 640x1500 118 KB

Сзади нашлось место для шести USB портов (версии 2.0), кнопки сброса, пары eSATA, гигабитного Ethernet порта, входа для подключения блока питания, замка Kensington и лицензионной OEM-наклейки Microsoft с серийным номером Windows.

На передней части устройства расположены четыре индикатора, показывающих состояние питания, активность жестких дисков и сети. В нормальном состоянии они горят неярким голубым светом.

300x141 6 KB. Big one: 1000x470 17 KB

Верхняя крышка представляет собой пластиковую сетку, под которой расположены два маленьких вентилятора. Более половины ее площади закрыто изнутри глухой металлической пластиной, так что на естественную конвекцию не рассчитывайте. Внизу сделан вырез для забора воздуха.

197x400 27 KB. Big one: 739x1500 262 KB 196x400 21 KB. Big one: 736x1500 220 KB

Кнопка включения светится мягко и не слепит глаза по ночам.

300x197 14 KB. Big one: 1000x657 42 KB

Сбоку ничего примечательного нет, обычный чёрный ящик.

342x400 9 KB. Big one: 1281x1500 89 KB

Чтобы попасть внутрь, нужно открутить пару винтов с накатанной головкой и сдвинуть крышку. На этом безотверточная разборка заканчивается.

300x225 17 KB. Big one: 1000x750 112 KB

Далее пользователя ждут три обычных болта, после избавления от которых нужно потянуть за синюю ручку и вытащить дисковую корзину.

400x328 26 KB. Big one: 1500x1231 286 KB

В руках останется вот такой модуль.

400x285 24 KB. Big one: 1500x1068 193 KB

В диски вкручено по шесть нестандартных винтов, которые служат направляющими в рельсах.

400x205 16 KB. Big one: 1500x768 122 KB

Никакой виброизоляции нет.

400x279 29 KB. Big one: 1500x1045 235 KB

Защелка фиксирует накопители достаточно прочно, люфтов нет.

400x272 25 KB. Big one: 1500x1021 206 KB

Внутреннее убранство выглядит следующим образом:

400x311 40 KB. Big one: 1500x1166 376 KB

Относительно мощный радиатор установлен на процессоре, теплорассеиватель поменьше - на чипсете. Слот PCIe x1 используется для подключения дисковой корзины, которая в собранном виде занимает пространство в правой части. Охлаждением всей конструкции занимаются два PWM-вентилятора размером 50x50x15 мм.

Энтузиасты наверняка заметили синенький разъем. Да, это полноценный VGA, закрытый снаружи заглушкой.

300x199 23 KB. Big one: 1000x665 192 KB

Непонятно, зачем производитель так сделал, но, к счастью, для его освобождения не нужно пользоваться кусачками. Достаточно отклеить пластиковую панельку снаружи, чтобы получить полноценный компьютер.

300x189 12 KB. Big one: 1000x631 68 KB

Доступ к оперативной памяти осуществляется с другой стороны корпуса. Под металлической крышкой скрывается единственный слот SO-DIMM. На плате есть место и под второй, но он не распаян.

400x314 26 KB. Big one: 1500x1176 253 KB
300x140 18 KB. Big one: 1000x468 135 KB

Содержимое слота – модуль Kingston PC2-6400 на 2 Гбайта.

QNAP TS-212

Компания QNAP (Quality Network Appliance Provider – «Поставщик Качественных Сетевых Устройств») успела завоевать мировое признание на рынке сетевых хранилищ любого масштаба, а также систем видеонаблюдения. TS-212 – одна из трёх моделей начального уровня, представленных в феврале 2011 года.

400x372 20 KB. Big one: 1500x1393 170 KB

Коробка без ручки содержит сам NAS, краткую инструкцию по подключению, гарантийный талон, набор винтов, кабели для подключения одного из дисков, диск с ПО, патч-корд и блок питания с силовым шнуром. Кстати, кто-нибудь в курсе, когда производители экономичных устройств заменят убийственную шестнадцатиамперную вилку на что-нибудь более элегантное?

400x314 24 KB. Big one: 1500x1176 144 KB

Блок питания выдает напряжение 12 В и рассчитан на мощность 60 Вт. По габаритам он слегка меньше, чем у TS Mini. Хорошо, что в нем используются стандартные разъемы IEC C13-C14: при необходимости легко подобрать кабель другой длины или подключить устройство к ИБП.

300x273 16 KB. Big one: 1000x909 130 KB
200x139 6 KB. Big one: 1000x697 80 KB

Белый корпус не такой маркий, как у ASUS, и может удачно вписаться в любой интерьер. Стоит отметить, что габариты TS-212 весьма скромны для двухдискового хранилища. Из трёх рассматриваемых NAS этот - самый компактный.

286x400 12 KB. Big one: 1073x1500 106 KB

223x400 11 KB. Big one: 835x1500 117 KB 220x400 16 KB. Big one: 823x1500 148 KB

Задняя панель не блещет богатством интерфейсов. Есть лишь два порта USB 2.0, RG-45 для гигабитной сети, кнопка сброса, замок «Кенсингтон»и вход для подачи питания с защелкой для провода. Почти половину пространства занимает 60 мм вентилятор, работающий на выдув. Обратите внимание, что винты, держащие крышку, отсутствуют. Раз уж NAS поставляется без дисков, то вы однозначно будете их туда ставить, а значит, придется снимать эту самую крышку. Производитель заботливо положил недостающие винты в отдельный пакет, избавив пользователей от лишней процедуры при инсталляции. Мелочь, а приятно!

Спереди расположены кнопка включения, USB порт с кнопкой быстрого резервного копирования и индикаторы активности. Синий светодиод «вырви-глаз» так и хочется заклеить изолентой.

226x400 11 KB. Big one: 847x1500 112 KB

Сверху пусто, внизу ближе к передней части есть прорези для забора воздуха. Таким образом, продув происходит по диагонали.

181x400 8 KB. Big one: 680x1500 88 KB 178x400 30 KB. Big one: 668x1500 140 KB

Боковая крышка чиста и просит аэрографии.

400x292 8 KB. Big one: 1500x1094 86 KB

Внутренности TS-212 просты, как три копейки. Под металлической пластиной располагается основная плата, сверху ставятся жесткие диски и закрепляются обычными винтами. Охлаждением занимается 60 мм вентилятор. Правая стойка находится так близко к краю, что винты с выпуклой головкой будут мешать закрытию крышки.

400x241 17 KB. Big one: 1500x904 133 KB

Нижний жесткий диск вставляется в монолитный порт, а верхний нужно присоединять кабелями из комплекта. Угловой вилке SATA в таком положении придется несладко.

400x316 34 KB. Big one: 1500x1183 250 KB

Материнская плата с обратной стороны выглядит следующим образом.

400x297 38 KB. Big one: 1500x1114 374 KB

На ней осталось свободное пространство для двух микросхем памяти и слота mini-PCIe. Возможно, эта же PCB используется и для других моделей. 
Synology DS212j

Вы знаете о нескончаемом противостоянии NVIDIA и AMD? Практически то же самое происходит у Synology и QNAP. Synology – не менее известный и зарекомендовавший себя с лучшей стороны производитель, который выпускает множество различных систем, начиная с домашних NAS и заканчивая высокопроизводительными решениями для крупного бизнеса. DS212j – младшая двухдисковая модель, представленная в ноябре 2011 года.

400x332 19 KB. Big one: 1500x1245 176 KB

Комплект поставки минимален: лицензионное соглашение, диск с ПО, крепежные винты, блок питания с кабелем и патч-корд (между прочим, STP, то есть экранированный).

400x259 25 KB. Big one: 1500x970 214 KB

Двенадцативольтовый блок питания рассчитан на мощность до 65 Вт – чуть больше, чем у QNAP при чуть меньших габаритах. Разъем и полярность позволяют запитать от него «вражеский» TS-212 . Ввод IEC C14 дает возможность использовать широко распространенные силовые кабели.

397x400 29 KB. Big one: 1489x1500 304 KB

324x400 12 KB. Big one: 1213x1500 106 KB

Корпус выглядит упитанным, и он действительно на 1.5 см шире QNAP. Такие размеры обусловлены громадным вытяжным вентилятором. 92 мм – не каждый NAS может похвастаться таким размахом.

Набор портов на задней панели абсолютно такой же, как и у TS-212: два USB 2.0, гигабитный LAN, питание, кнопка сброса и замок Kensington. Как и у конкурента, боковая крышка ничем не закреплена, винты лежат отдельно. Кто первый сделал такой ход неизвестно, но главное, что ход правильный.

259x400 9 KB. Big one: 972x1500 102 KB 258x400 28 KB. Big one: 968x1500 204 KB

Спереди присутствуют индикаторы состояния и активности, а также кнопка включения. Подсветка у всех адекватной яркости.

245x400 9 KB. Big one: 920x1500 78 KB

Верхняя часть не может похвастать ничем примечательным, снизу расположена вентиляционная решетка. По аналогии с TS-212, воздушный поток в DS212j направлен от нижней передней грани к задней верхней.

194x400 6 KB. Big one: 726x1500 57 KB 197x400 11 KB. Big one: 740x1500 90 KB

На обоих бортах красуются логотипы Synology, по совместительству работающие дополнительными воздухозаборниками. Воздушный поток большого вентилятора позволяет засасывать воздух с трёх сторон.

400x297 10 KB. Big one: 1500x1115 97 KB

Внутренняя организация практически идентична той, что было у QNAP, но дисковая корзина сделана более продуманно: оба диска вставляются в соответствующие порты без лишних проводов.

400x230 18 KB. Big one: 1500x863 129 KB

Конструкция с установленными дисками выглядит так. Отмечу, что зазор между дисками достаточен для их нормальной продувки.

400x228 19 KB. Big one: 1500x855 131 KB

На другой стороне металлической пластины расположена материнская плата небольших размеров. В отличие от TS-212, процессор не закрыт радиатором, но он и так греется не сильно.

400x274 35 KB. Big one: 1500x1029 341 KB

Участники тестирования – программная часть

ASUS TS mini

Подготовка к работе

Поскольку я не буду использовать родные диски мини-сервера, начну с описания процедуры восстановления NAS. Благодаря VGA порту можно подглядывать, что происходит в самом устройстве.

400x259 10 KB

Если просто поставить новые диски, процесс загрузки застопорится там, где и должен при отсутствии загрузочных устройств.

500x39 6 KB

Если запустить на компьютере диск Recovery DVD, первым делом будет задан вопрос, мигает ли системный индикатор оранжевым светом.

500x395 47 KB

Чтобы он замигал, необходимо нажать, например, скрепкой кнопку на задней панели. Старт в таком режиме активизирует особый загрузчик, явно созданный на базе Windows Vista.

500x372 20 KB

Независимая от жестких дисков память – отличное решение. Помнится, Asus уже внедрял похожую технологию на материнские платы для ПК и называлась она Express Gate. Вот только позиционируется она, на мой взгляд, неправильно. Быстрый запуск простейших программ на деле оказался никому не нужен – лучше потерпеть 30 секунд и попасть в привычную для себя среду, чем в альтернативную ОС, где нужно всё настраивать отдельно. Было бы лучше, если б главной функцией этой технологии стало восстановление компьютера после сбоя.

По закону подлости загрузочных болванок не оказывается под рукой в нужный момент (да и вообще есть тенденция отказываться от оптических приводов), а скрытый служебный раздел на жестком диске умирает вместе с ним. В автономную Flash память на плате можно поместить множество сервисных утилит, драйверы для ОС или даже саму резервную копию – USB «свисток» на 64 Гбайта сейчас можно купить в рознице за менее чем 2000 рублей. Кстати, сисадмины и энтузиасты давно уже пользуются загрузочными флэшками с BartPE, Hiren's BootCD и прочим. Производителям нужно лишь предоставить ПО с дружественным для не IT-специалистов интерфейсом для создания аналогичных флешек с учетом особенностей их собственных плат.

То было лирическое отступление, надеюсь, кто-нибудь из разработчиков возьмет на заметку вышесказанное. Вернемся к TS Mini.

Через несколько минут после запуска можно будет протолкнуть мастер восстановления на следующий шаг.

500x395 42 KB

В это время на сервере работают «шайтан-скрипты»:

500x374 42 KB

Мастер восстановления предлагает разные варианты. В этот раз интересен возврат к заводским настройкам.

500x395 54 KB

После нажатия «Next» начнется заливка образа на сервер.

500x395 49 KB

Реально процесс длится около 10 минут – время, за которое DVD считывает 4 Гбайта информации.

500x369 59 KB

По окончании заливки NAS уйдет на перезагрузку и начнется автоматическая (unattended) инсталляция Windows: установка региональных настроек, серийного номера и прочего. После второй перезагрузки перед нами предстанет рабочий стол Home Server, который при нормальных условиях никто не должен был увидеть.

500x375 32 KB. Big one: 1024x768 24 KB

Страница в Internet Explorer предупреждает, что большинство действий, совершаемых стандартными средствами Windows, могут навредить системе. Ладно, трогать нельзя, но посмотреть-то можно.

Прежде всего, я проверил, как организовано дисковое хранилище.

600x232 11 KB

Два терабайтных диска видны раздельно. Но логический диск D выглядит совершенно иначе.

367x517 6 KB

После подключения такого виртуального пространства к ПК ситуация не меняется. Конечно, в этом плане технология неотточена…

261x57 4 KB

Дисковый пул (или Drive Extender) в Windows Home Server – технология, похожая на динамические диски, когда логические тома начинают меньше зависеть от физических носителей. Drive Extender обеспечивает совместную работу разнородных накопителей в качестве единого пространства и отказоустойчивость путем дублирования информации на другой диск (не обязательно на какой-то один). Инструментов для управления этой системой нет ни в стандартной управляющей утилите, ни в «хакерской» среде локальной сессии, но существуют сторонние плагины. Честно говоря, я больше доверяю классическим RAID, JBOD и резервному копированию. Надеюсь, подобные инопланетные технологии в Windows 8 реализуют лучше.

Тем временем, мастер установки скажет, что восстановление прошло успешно и пора ставить утилиту для управления - Asus Home Server Connector.

500x395 46 KB

Для этого следует воспользоваться другим диском из комплекта.

500x395 55 KB

Мастер быстро находит TS Mini в сети и начинает установку. Во время этого процесса задается имя сервера, пароль и расписание установки обновлений.

500x361 35 KB

Если согласиться на установку обновлений сразу, то можно откидываться на спинку кресла – почти целый час аппарат будет заниматься своими делами. Microsoft в своем репертуаре.

Развязкой всей этой эпопеи будет главное меню консоли администрирования.

Интерфейс управления

По сути, эта консоль, которая запускается через специальную утилиту, не что иное, как терминальная сессия. Неясно было, зачем изобрели велосипед, когда существует родной mstsc, но практика показала, что со стандартным клиентом у новичков могут возникнуть сложности, а эта утилита не требует дополнительных настроек, плюс отслеживает состояние как NAS, так и компьютера. В целом идея с удаленным доступом хороша. Этот протокол в меру надежен, при публикации в интернет он проще и безопаснее вороха веб-интерфейсов различных сервисов.

500x353 18 KB. Big one: 1008x711 62 KB

Стартовая страница – средство управления резервными копиями. О нем речь пойдет отдельно.

Вторая вкладка – управление учетными записями. Здесь можно создавать новых пользователей, задавать им права доступа и прочее.

500x353 30 KB. Big one: 1008x711 131 KB

Следующая - управление папками с общим доступом. По умолчанию уже есть некоторый набор готовых каталогов. Им можно назначить права для разных пользователей и управлять дублированием средствами Drive Extender.

Кстати, внизу окна есть отметка со временем, когда последний раз проводилась процедура балансировки. Она включает в себя создание копий выбранных папок и перемещение информации с переполненных дисков на свободные, если таковые есть.

В теории, идея использовать JBOD с дублированием каталогов не такая уж и плохая. В отличие от RAID-1, ваша информация какое-то время остается незащищенной, и системный раздел так просто не резервируется, зато можно включать/выключать дублирование для отдельных папок, а не жертвовать сразу половиной пространства. Плюс у TS-Mini есть пара портов eSATA и шесть USB. Я не успел проверить такую возможность, но, судя по документации, можно расширить общий пул с помощью внешних дисков по первому требованию. Насколько надежно работает подобная конструкция, мне выяснить не удалось, поскольку на это требуются месяцы практического использования.

500x353 23 KB. Big one: 1008x711 72 KB

Вкладка Server Storage нужна в основном при добавлении нового диска или замене сбойного. Пока всё хорошо, делать в ней нечего.

500x353 25 KB. Big one: 1008x711 76 KB

Xtor manager это плагин ASUS, предназначенный для работы с внешними дисками и впридачу файловый менеджер для перемещения данных. Отсюда можно вручную запустить резервное копирование или синхронизацию с другим накопителем.

500x353 25 KB. Big one: 1008x711 75 KB

Другой плагин производителя – связь с облачным хранилищем WebStorage. Раньше предоставлялось аж 500 Гбайт на один год для резервного копирования в интернете, но в прошлом году бесплатная поддержка была прекращена.

500x353 23 KB. Big one: 1008x711 66 KB

ASWM – ASUS System Web-based Management – служба мониторинга, давно использующаяся на серверных материнских платах этого производителя. Она отслеживает температуры, состояние вентиляторов, дисков, степень загрузки памяти, процессора и другие подобные параметры с возможностью установки критических рубежей и отправки уведомлений по почте в случае их превышения. Через нее же можно посмотреть журналы событий Windows.

500x353 27 KB. Big one: 1008x711 85 KB

Маленькая кнопочка «Settings» открывает доступ ко второй половине настроек. Кратко опишу содержание меню.

500x353 29 KB. Big one: 1008x711 83 KB

    General: содержит основные параметры, в том числе настройка времени, региона и расписание установки обновлений. Если выбрать автоматический режим, они будут ставиться в полночь – такая самостоятельность один раз подпортила мне результаты тестов.
    Backup: настройка расписания резервного копирования компьютеров и установка срока, в течение которого нужно хранить резервные копии.
    Passwords: установка основного пароля администратора и степени строгости политики, которой должны соответствовать остальные пароли.
    Windows Media Center: сервис с гламурным интерфейсом, оптимизированный под телевизоры, который занимается трансляцией медиафайлов по сети. В этой вкладке меню выбираются папки, к которым разрешен доступ компьютерного Windows Media Center и так называемых Windows Media Center Extenders – устройств, поддерживающих данную функцию, самым популярным из которых является Xbox 360.
    Media Sharing: установка разрешений на папки, к которым может осуществляется доступ для потокового вещания.
    Remote Access: здесь можно задействовать удаленный доступ к TS mini через веб-интерфейс. При включении произойдет попытка автоматически настроить ваш маршрутизатор для доступа из внешней сети, и она увенчается успехом, если он поддерживает UPnP. Отсюда же настраивается доменное имя третьего уровня. Сервис аналогичен No-IP или DynDNS, но только от Microsoft. 

500x353 33 KB. Big one: 1008x711 102 KB

    Add-ins: установка дополнительных пакетов расширения, к которым относятся WebStorage Connector и Xtor Manager. Дополнительно можно установить антивирус Avast, а в сети можно найти множество других дополнений.
    ASUS WebStorage: этот плагин был рассмотрен выше, на данной вкладке меню задаются параметры аккаунта для одноименной службы.
    Resources: информация о системе, в частности версия ОС, ее компонентов, название и частота процессора, а также объем оперативной памяти. 
QNAP TS-212

Подготовка к работе

Установка TS-212 начинается с запуска утилиты QNAP finder. После простейшего мастера установки и просьбы файервола разрешить доступ появляется такое окно:

500x429 39 KB. Big one: 686x588 51 KB

Строго говоря, этот finder помогает лишь определить IP адрес устройства и подключиться к веб-интерфейсу, который, к слову, поддерживает русский язык и работает на чужих жестких дисках, которые остались после TS mini.

Первым шагом будет инициализация дискового пространства, на следующем будет предложено загрузить прошивку. Я использовал последнюю доступную на тот момент версию 3.5.2 Build1126.

500x354 17 KB. Big one: 1003x710 36 KB

После завершения загрузки откроется мастер установки начальных настроек.

500x354 18 KB. Big one: 1003x710 36 KB

По шагам задается имя сервера, пароль администратора, устанавливается дата и время с выбором NTP сервера. Мастер еще не знает, что у Москвы часовой пояс стал GMT+4, но в прошивке изменение законодательства уже учтено. Далее вводятся настройки TCP/IP и включаются нужные нам сервисы. По умолчанию выбраны «Сеть Microsoft», «Менеджер файлов» и «FTP-сервер».

500x354 20 KB. Big one: 1003x710 40 KB

На заключительной стадии происходит конфигурирование дисков. Доступны массивы RAID-0, RAID-1, JBOD, однодисковый том и пункт «не устанавливать конфигурацию диска». Файловую систему можно выбрать между EXT3 и EXT4.

500x354 22 KB. Big one: 1003x710 44 KB

Останется только подтвердить все введенные данные и минут через 10 система будет готова к бою. Если выбрать массив RAID-1, диски будут еще какое-то время перестраиваться.

Интерфейс управления

Главное меню напоминает «айфоновский» интерфейс. Главный пункт в нем – администрирование.

500x354 22 KB. Big one: 1003x710 76 KB

Все возможности устройства представлены в едином дереве aka «проводник с функцией поиска». Однотипный интерфейс используется во всех сетевых хранилищах QNAP, отличаются только некоторые специфические функции и производительность аппаратной части.

500x354 28 KB. Big one: 1003x710 64 KB

Опишу кратко каждый пункт.

500x354 30 KB. Big one: 1003x710 56 KB

    Система: установка имени NAS, номера порта, по которому доступен веб-интерфейс, выбор кодировки имен файлов и требований к паролям пользователей.
    Сеть: настройка IP адреса, включение jumbo фреймов Ethernet, управление беспроводным адаптером (который, видимо, можно подключить к USB порту) и настройка динамического DNS.
    Привязка служб: по умолчанию все сервисы доступны для всех сетевых интерфейсов. При желании это можно изменить. Для TS-212 с одним LAN портом это актуально только для Wi-Fi.
    Аппаратные установки: управление динамиком, спящим режимом и вентиляторами, которым можно задать режим работы в зависимости от температуры «системы» (скорее всего, CPU).
    Безопасность: фильтрация по IP адресам и возможность бана при большом количестве неудачных попыток подбора пароля на основные сервисы.
    Уведомления: оповещение через почту или SMS об ошибках. Для использования возможности отсылать SMS требуется сторонний SMS шлюз, а NAS лишь формирует определенный URL, содержащий логин, пароль, номер телефона и текст сообщения.
    Электропитание: выключение и перезагрузка устройства, определение поведения как поступать после сбоя питания (включиться или оставаться выключенным), а также график плановых отключений.
    Сетевая корзина: архиполезная штука! В обычной ситуации удаление файла из сетевой папки приводит к его мгновенному уничтожению, а данная функция перемещает ненужные данные в корзину, которая является такой же доступной сетевой папкой.
    Резервирование/Восстановление установок: экспорт и импорт конфигурации через файл.
    Системный журнал: журнал событий системы, журнал подключений, мониторинг активных пользователей и интеграция с удаленным syslog сервером.
    Обновление системы: заливка новой прошивки.
    Восстановить заводские параметры: название говорит само за себя. Одной кнопкой можно уничтожить все данные и сбросить настройки на стандартные.

500x354 22 KB. Big one: 1003x710 41 KB

    Управление томами: то, что уже делалось при инициализации хранилища. Здесь можно создать RAID и отформатировать тома, причем без повторной заливки прошивки.
    Настройка RAID: классические операции - миграция уровня RAID и увеличение емкости масива. Поскольку у TS-212 всего два диска, можно лишь превратить одиночный диск в RAID-1, а RAID-1 можно увеличить емкость, последовательно заменив диски. С RAID-0 ничего сделать нельзя.
    S.M.A.R.T: можно посмотреть состояние дисков не только на уровне «хорошее»/«плохое», но и полную таблицу со всеми доступными атрибутами, плюс запланировать регулярную проверку.
    Цель iSCSI: этой функции посвящен отдельный раздел данной статьи.
    Виртуальный диск: подключение NAS к iSCSI цели на другом сервере.

500x354 21 KB. Big one: 1003x710 35 KB

    Безопасность домена: выбор способа аутентификации пользователей: в LDAP, Active Directory или локально. В прошивке версии 3.6, которая вышла после начала тестирования, NAS сам может выступать в роли сервера LDAP.
    Пользователь: настройка локальных пользователей с установкой дисковых квот и прав доступа на сетевые папки.
    Группы: настройка групп пользователей.
    Общие ресурсы: управление общими папками и активация такой интересной функции как монтирование ISO файлов. Содержимое образа будет представлено в виде папки, доступной по SMB протоколу. Это полезно, например, при установке компонентов Windows, когда нет возможности воспользоваться виртуальным приводом, а долго разархивировать контейнер неохота.
    Квота: пользователю будет запрещено создавать новые файлы или каталоги при превышении размера квоты.

500x354 25 KB. Big one: 1003x710 48 KB

    Сеть Microsoft: включение службы доступа к файлам для сети Microsoft и управление Wins.
    Сеть Apple: включение файловой службы AppleTalk.
    Служба NFS: включение службы Network File System для Linux пользователей.
    FTP-сервер: полноценная служба с возможностью задать порты для пассивного подключения, число подключений, кодировку и ограничение скорости.
    Telnet / SSH: открывает возможность подключиться к серверу по Telnet и SSH.
    Служба SNMP: после включения этой функции накопитель сможет отправлять сообщения SNMP на сервер системных сообщений.
    Веб-сервер: включение Apache. Если верить XSpider 7.0 Demo, совместно с ним используется PHP версии 5.2.14.
    Обнаружение сетевых служб: активация протоколов UPnP и Bonjour.

500x354 31 KB. Big one: 1003x710 60 KB

    Веб-менеджер файлов: включает Web File Manager.
    Медиа-сервер: включает Multimedia Station. О веб-службах будет рассказано отдельно.
    Менеджер загрузки: включает Download Station. О нем в разделе «BitTorrent».
    Сервер видеонаблюдения: включает Surveillance Station. Смотреть пункт «Видеонаблюдение».
    Служба iTunes: музыкальный сервер для изделий Apple.
    Медиа-сервера UPnP: полезный сервис для новейших телевизоров с LAN и тому подобных устройств. Реализован на базе TwonkyMedia. В используемой прошивке стоит версия 6.0.34.
    Сервер MySQL: включает базу данных для веб-сайта.
    Пакеты QPKG: несколько десятков пакетов расширения. Если веб-сервер планируется использовать сколь-либо серьезно, пригодится, например, phpMyAdmin.
    Сервер Syslog: NAS может быть Syslog-сервером в сети и в критической ситуации рассылать e-mail уведомления.
    Сервер RADIUS: TS-212 может взять на себя роль и RADIUS сервера, используя свою внутреннюю базу пользователей.
    Сервер резервного копирования: службы Rsync и RTRR (Real time Remote Replication) необходимы в первую очередь в бизнес-сегменте. Они позволяют производить резервное копирование локально или на другие NAS в реальном времени. В данном случае настраивается доступ для других устройств к локальному хранилищу.
    Антивирус: хранилище будет проверяться на предмет вредоносного ПО с помощью ClamAV.
    TFTP-сервер: простой протокол передачи файлов. Используется главным образом для первоначальной загрузки бездисковых рабочих станций.

500x354 22 KB. Big one: 1003x710 38 KB

    Репликация: настройка Rsync и RTRR, но уже в другом направлении - из локального хранилища на удаленный сервер.
    Облачное резервирование данных: привязка к сторонним сервисам, а именно Amazon S3, Elephant Drive и Symform.
    Time Machine: после включения этой службы NAS можно использовать как резервный диск для Time Machine в Mac OS.
    Внешний диск: репликация данных между хранилищем и USB накопителем.
    Кнопка копирования: программирование действия, которое необходимо выполнить при нажатии кнопки на передней панели.

    300x225 9 KB. Big one: 1000x750 56 KB

    Это может быть копирование данных из USB устройства в заданную директорию NAS или наоборот.

500x354 19 KB. Big one: 1003x710 32 KB

    Внешнее устройство: здесь выполняются такие операции как форматирование и безопасное извлечение.
    USB-принтер: о нем в отдельном разделе.
    ИБП: и об источниках бесперебойного питания тоже.

500x354 21 KB. Big one: 1003x710 35 KB

    MyCloudNAS - сервис QNAP для доступа к NAS из Интернет. После регистрации и выбора сервисов, которые стоит публиковать, будет предложено скачать список соответствующих ссылок. Фактически это аналог DynDNS или No-IP в другой оболочке.

500x354 20 KB. Big one: 1003x710 34 KB

    Информация о системе: краткая сводка, включающая имя устройства, версию прошивки, текущую загрузку ЦП и памяти, температуры дисков и системы.
    Системная служба: единая таблица, в которой можно посмотреть, какие из доступных сервисов активированы.
    Монитор ресурсов: графики загрузки ЦП, памяти и сети, круговая диаграмма занятости хранилища и табличка top, известная всем пользователям Linux с информацией, сколько ресурсов потребляет тот или иной процесс.

Synology DS212j

Подготовка к работе

Первоначальная установка происходит через Synology Assistant.

500x290 14 KB. Big one: 841x488 15 KB

С его помощью определяется NAS, задается сетевое имя, пароль администратора, IP адрес и заливается прошивка.

500x391 12 KB. Big one: 816x638 13 KB

Спустя четверть часа процесс завершается, Synology Assistant подскажет адрес веб-интерфейса.

500x354 28 KB. Big one: 1003x710 48 KB

Он сделан в стиле рабочего стола. Для продолжения работы нужно выполнить несколько дополнительных операций. Если вы не снимали соответствующую галочку при установке, раздел будет уже создан.

500x354 18 KB. Big one: 1003x710 27 KB

Массив типа SHR означает Synology Hybrid Raid. Он работает по следующему принципу:

600x345 26 KB

600x345 30 KB

Как и Drive Extender в Windows Home server, такой массив сочетает преимущества JBOD в эффективном использовании пространства и особенности RAID в обеспечении отказоустойчивости. Накопители не всегда могут быть кратны 500 Гбайтам, так что в некоторых случаях часть пространства всё же может потеряться. Другой недостаток такой системы в том, что нагрузка на диски неравномерна. Самый большой диск может стать узким местом и ограничивать производительность.

Но подобное может начать проявляться лишь на очень высоких нагрузках и в случае, когда диски сильно разные. В реальности производительность, скорее всего, будет ограничена CPU, так как именно он считает контрольные суммы. В конце концов, для достижения рекордной скорости используют совсем другие устройства, а для хранения файлов гораздо важнее легкая расширяемость и эффективное использование пространства.

SHR это настоящий RAID, работающий на уровне ниже файлового. Раз Synology не боится использовать его даже в старших моделях NAS для бизнес-сегмента, значит, его уровню надежности можно доверять (в отличие от Drive Extender’а). Вариант, выдерживающий отказ одного диска, похож на RAID-5, но существует и аналог RAID-6, способный продолжать работу после поломки двух дисков одновременно. К сожалению, в DS212j их всего два, поэтому SHR для него по своей логике не будет отличаться от RAID-1.

500x225 11 KB. Big one: 860x387 10 KB

С массивом поиграли, дальше нужно создать пользователей. В принципе можно обойтись и стандартным админом, но правильнее будет оставить эту роль только для администрирования, сохранив пароль в тайне, а для сетевых подключений назначить отдельные учетные записи с желаемыми правами к папкам.

500x225 14 KB. Big one: 860x387 14 KB

На третьем шаге нужно создать папки и задать права пользователям. По умолчанию папок с открытым общим доступом нет.

Интерфейс управления

Настройки производятся в панели управления. Здесь их великое множество.

500x285 24 KB. Big one: 860x490 30 KB

Раздел «Обмен файлами и права доступа» содержит следующие пункты:

    Win/Mac/NFS: активирует файловую службу для трёх популярных платформ. В этом же окне можно ввести NAS в домен. Как и у QNAP, есть сетевая корзина, а еще журнал транзакций к файлам – кто что создавал, удалял и прочее в том же духе.
    FTP: сервер FTP со всеми основными возможностями - настройка портов, различных ограничений и ведение логов.
    Пользователь: окно управления пользователями, которое уже встречалось недавно.
    Группа: создание групп пользователей.
    Папка общего доступа: помимо банальных операций здесь есть возможность включить шифрование алгоритмом AES-256. Оно прозрачно со стороны сетевых клиентов до перезагрузки NAS. После повторного включения папка будет недоступна, необходимо зайти в веб-интерфейс и повторно ввести ключ. У QNAP TS -212 такой функции нет вовсе, это прерогатива более дорогих PRO-моделей.

500x334 29 KB. Big one: 751x502 20 KB

    Права доступа к домену: настройки безопасности при работе в Windows домене.
    Ldap: клиент каталога LDAP.
    Права доступа к приложению: можно настроить так, что не всем учетным записям будет предоставлен доступ ко всем сервисам.

Раздел «Сетевые службы» включает в себя такие средства:

    Веб-службы: запускает сервер Web Station, а также PHP, MySQL и WebDAV.
    DDNS: интеграция с дюжиной служб динамического DNS. Выбор поистине богат.
    Конфигурация маршрутизатора: можно автоматически настроить роутер, если тот поддерживает UPnP.
    Брандмауэр: настройка полноценного файервола.
    Автоматическая блокировка: бан IP адреса при большом количестве неудачных попыток входа с возможностью указать, когда снимать блокировку.
    Терминал: запуск служб Telnet и SSH. Это может пригодиться прежде всего для сторонних плагинов.
    SNMP: включение и настройка мониторинга системы через простой протокол управления сетями.
    Сетевое резервирование: бэкап с помощью rsync на другое устройство или режим «Synology» между двумя NAS данного производителя. Поддерживается синхронизация общих папок от других DiskStation и Time Backup – снятие мгновенных снимков состояния хранилищ с отслеживанием версионности.

«Система» состоит из следующих частей:

    Сеть: имя машины, адрес DNS, шлюза, включение IPv6 с возможностью туннелирования через IPv4, Jumbo Frame и настройка PPPoE (то есть NAS может сам инициировать интерне-соединение).
    Настройки DSM: выбор порта, на котором доступен веб-интерфейс, «скина» и установка таймаута для автоматического выхода из управляющей сессии.
    Региональные параметры: дата, время, язык. Отмена перехода на зимнее время и изменение часовых поясов уже учтены.
    Уведомления: настройка уведомлений через электронную почту или sms шлюз Clickatell.
    Питание: выбор режима работы вентилятора из трёх пунктов - режим охлаждения, режим низкого энергопотребления и тихий режим. Непонятно, чем отличаются два последних. Здесь же настраиваются автозапуск после резкого отключения, звуковые сигналы при включении/выключении, сбое вентилятора или диска, ИБП (об этом позже), график регулярного отключения, спящий режим (в том числе для USB дисков). Также есть режим глубокого сна. В нем все индикаторы на устройстве гаснут, питание жестких дисков отключается и полностью останавливается вентилятор.
    Внешние устройства: управление USB накопителями и принтерами.
    Значения по умолчанию: форматирование диска с сохранением настроек или без, сброс пароля и удаление базы MySQL.
    Обновление: установка новой прошивки напрямую из сети или заливка файла с образом вручную.

В «Настройках приложения» запускаются различные встроенные сервисы:

    Сервер мультимедиа: сервер DLNA/UPnP. Автоматически создает сетевые папки photo, music и video.
    iTunes: включает сервер iTunes для ваших мобильных устройств.
    Audio station: система прослушивания музыки.
    Photo station: фотоальбом.
    Download station: менеджер закачек.
    Surveillance station: сервер видеонаблюдения.
    File station: файловый менеджер. Обо всех «-station» будет рассказано в следующей главе.
    Почтовый сервер: натуральный сервер электронной почты, поддерживающий POP3 и IMAP. 

500x272 14 KB. Big one: 860x467 12 KB

С панелью управления закончили. Переходим к другим ярлыкам на рабочем столе.

    Проводник – отличный файловый менеджер. Здесь сразу видно содержимое дисков локального компьютера, так что можно перемещать файлы и папки в обоих направлениях без промежуточного архивирования. Этим не может похвастаться ни QNAP, ни ASUS.

    В нем же можно подключить к NAS любой UNC путь и из сети он будет выглядеть как одна из общих папок на сервере. Это полезно, если нужно запустить процесс копирования из третьего источника без участия клиентского компьютера. Плюс, как и у QNAP, есть функция быстрого подключения ISO образа в виде сетевой папки.

500x294 19 KB. Big one: 850x500 17 KB

    Справка DSM – подробное описание всех функций на русском языке.

500x354 30 KB. Big one: 1003x710 35 KB

    Быстрый старт – это окно высвечивалось при первом запуске, мы его уже видели.
    Диспетчер хранения – тоже уже встречался. Помимо управления массивом, с помощью этого инструмента можно управлять кэшем записи, смотреть полную таблицу S.M.A.R.T. и управлять целями iSCSI.
    Резервирование – всё, что касается бэкапов. Можно делать локальную копию на USB носители, через сеть на Rsync или Synology сервер, а также в облако Amazon S3.
    На соседней вкладке можно сделать копию конфигурации. Синхронизация общих папок – интересный сервис, работающий между разными DiskStation производства Synology. Дома он вряд ли нужен, но представьте, что есть центральный офис, несколько филиалов, всеобщая необходимость работать с одними и теми же данными, а каналы связи слишком медленные, чтобы обеспечить прямой доступ к центральному серверу – в такой ситуации эта функция будет очень полезна.

500x354 24 KB. Big one: 1003x710 30 KB

    Центр пакетов – дополнительные службы разной степени важности, начиная от сервера LDAP и заканчивая phpMyAdmin. В сети можно найти сотни других IPKG пакетов. 

500x354 27 KB. Big one: 1003x710 40 KB

    EZ-Internet – мастер, настраивающий удаленный доступ к DiskStation, который поможет осуществить подключение к интернету, переадресует порт на UPnP роутере, настроит файервол и динамический DNS.
    Мониторинг ресурсов – незатейливые графики загрузки ЦП, памяти и сети. Первые два можно посмотреть более подробно с информацией по процессам, третий – просто в крупном масштабе. Жаль, нигде не отображается длина очереди к диску.

500x422 37 KB. Big one: 915x772 28 KB

    И напоследок сведения о системе – общая информация о названии модели NAS, версии прошивки, основные настройки сети, параметры жестких дисков (модель, температура и процент занятости), системный журнал и список работающих служб.
Дополнительные возможности

iSCSI

iSCSI – протокол для передачи SCSI команд через сеть TCP/IP, являющийся недорогой альтернативой совсем суровым оптическим сетям хранения данных. Если совсем кратко, то он позволяет подключать сетевые хранилища как физические диски со всеми вытекающими последствиями. Обычно это необходимо для создания кластеров, виртуализации и резервирования в реальном времени. Матчасть данной технологии очень глубока, не буду в нее сейчас погружаться, но опишу, как создать простейшее iSCSI подключение.

ASUS TS mini не поддерживает iSCSI, поэтому перейдем к следующему участнику.

QNAP TS-212

500x354 31 KB. Big one: 1003x710 64 KB

Воспользуемся мастером быстрой настройки. На первом шаге необходимо задать имя iSCSI target, то есть сервера.

500x354 29 KB. Big one: 1003x710 63 KB

Проверка подлинности для тестирования излишняя, так что без нее.

500x354 29 KB. Big one: 1003x710 62 KB

Далее нужно привязать iSCSI target к логическому тому. Технология Thin Provisioning – кредитная карта для хранилища, она позволяет декларировать больше свободного места, чем есть на самом деле. Для тестов я не буду ею пользоваться, а жестко задам объем выделенного под виртуальный диск пространства.

500x354 29 KB. Big one: 1003x710 62 KB

Пятый и шестой шаги – подтверждение параметров и непосредственно создание iSCSI цели. Останется только включить службу iSCSI и сделать ее доступной для клиентов. В этот момент появляется предупреждение, что если эта функция используется для нужд виртуализации, рекомендуется отключить кэш записи дисков.

Вторая часть Марлезонского балета – настройка инициатора iSCSI (клиента) на ПК. К счастью, в Windows 7 он является стандартным компонентом. Советую прочитать эту простую статью, где описываются необходимые шаги. Главное, в итоге инициатор должен увидеть цель и подключиться к ней.

312x450 23 KB. Big one: 495x715 22 KB

Если всё прошло успешно, в управлении дисками появится новый накопитель.

500x368 17 KB

Как я уже говорил, новый диск будет выглядеть как физический, а значит, в диспетчере устройств можно задать для него политику кэширования. По умолчанию кэш выключен, для тестирования производительности будет использоваться именно такой режим.

354x450 24 KB

Synology DS212j

На втором NAS всё делается по аналогии. iSCSI target настраивается в диспетчере хранения.

500x354 18 KB. Big one: 1003x710 28 KB

В отличие от QNAP, iSCSI target можно создать не только на уровне файлов, но и на уровне блоков. Если используется массив SHR, то можно использовать только файловый метод.

500x354 23 KB. Big one: 1003x710 31 KB

Чем это лучше? Да тем, что не используется промежуточное звено – файловая система NAS.

600x225 19 KB

Никто не заставляет выделять под это дело весь массив целиком, можно сделать несколько LUN’ов и использовать их по назначению, но максимальная производительность будет достигнута именно при полном использовании всех дисков и создании классического RAID через мастер настройки iSCSI.

500x354 29 KB. Big one: 1003x710 45 KB

Напоследок остается сказать, что DiskStation Manager поддерживает и Thin Provisioning.

500x354 16 KB. Big one: 1003x710 26 KB

Принт-сервер

Все три протестированных NAS могут выступать в роли сервера печати. Проверим эту функцию на практике с помощью HP LaserJet 1010.

ASUS TS mini

Стандартными средствами Home Server сделать принт-сервер невозможно, в консоли нет такого пункта. Но ведь это Windows, можно зайти через удаленный рабочий стол, установить принтер как на обычный компьютер и открыть к нему общий доступ.

600x349 35 KB

Всё прекрасно работает. Кроме того, сервер предоставляет драйверы для опубликованных принтеров, так что на клиентских компьютерах никакие лишние телодвижения не нужны, достаточно кликнуть по иконке.

QNAP TS-212

NAS определяет принтер корректно.

500x354 28 KB. Big one: 1003x710 63 KB

В отличие от Windows сервера, QNAP (и Synology тоже) не предоставляет драйвер. При попытке подключиться возникнет предупреждение, что он не найден. Но достаточно произвести установку вручную и всё будет в порядке.

600x349 35 KB

Synology DS212j

DS212j увидел принтер также нормально. Можно включить поддержку Apple AirPrint и Google Cloud Print, а вот как задать удобочитаемое имя устройства я не понял.

500x426 25 KB. Big one: 860x732 24 KB
600x348 21 KB

Работа с ИБП

Уважающий себя NAS обязан уметь работать с источником бесперебойного питания. В роли ИБП выступит APC SUA750XLI. Недавно у него померли батарейки, но на программную логику это никак не влияет.

ASUS TS mini

Как и в случае с принтером, просто так бесперебойники не поддерживаются. Можно попробовать довериться технологии Smart Battery, которую поддерживает Windows и данный UPS – за счет этого система начнет работать подобно ноутбуку с аккумулятором.

404x448 4 KB

Но никаких средств управления извне не будет. Поэтому нужно взять и установить штатный драйвер. В нем есть и ведение логов, и уведомления о сбоях по почте, и много чего другого. APC PowerChute Business Edition, идущий в комплекте к данному ИБП, это вообще трёхуровневая система «агент-сервер-консоль», способная управлять несколькими устройствами одновременно, так что в выборе вариантов установки свобода полная. Можно поставить все три компонента на сам TS mini.

500x379 27 KB. Big one: 644x488 17 KB

QNAP TS-212

QNAP корректно распознал ИБП. Также он поддерживает сетевые бесперебойники с управлением по SMTP. Список протестированных на совместимость устройств можно узнать тут. Предпочтение отдается фирме APC. Что насчет остальных – неизвестно.

500x354 26 KB. Big one: 1003x710 39 KB

Synology DS212j

Этот NAS почему-то решил, что у ИБП батареи заряжены, хотя это не так. Официальный список совместимости можно найти здесь. Там же есть ссылки на неофициальные источники.

500x266 22 KB. Big one: 860x457 18 KB

Видеонаблюдение

Есть вариант использовать NAS как сервер видеонаблюдения. IP камер у меня пока нет, зато есть Logitech Webcam C500. Попробую с нею что-нибудь сотворить.

ASUS TS mini

Это TS mini официально тоже не умеет. Более того: драйвер не захотел устанавливаться на Home Server. Но где наша не пропадала. Из полной версии установщика любым архиватором можно выдернуть непосредственно драйвер без лишней обвязки - LWS_Driver_Installer_x86.exe. Он запустился и установился успешно.

В качестве ПО для управления камерой я использовал Active Webcam. И оно заработало.

600x450 50 KB

QNAP TS-212

Surveillance Station включается в каталоге «серверы приложений», после чего на главной черной странице становится доступен новый пункт меню. К сожалению, основной акцент сделан на IP камерах, TS-212 может работать с двумя одновременно. Поддержка USB моделей крайне скудная и моей С500 нет в списке совместимости.

500x354 19 KB. Big one: 1003x710 28 KB

Возможно, кто-то задался вопросом, почему у меня на всех скриншотах Internet Explorer. Всё потому, что функция видеонаблюдения использует ActiveX, несмотря на то, что операционная система NAS никак не связана с Microsoft. В итоге Firefox отображает этот раздел некорректно. Даже в адресной строке светится параметр browser=nonie.

500x354 11 KB. Big one: 1003x710 20 KB

Synology DS212j

Synology вообще не поддерживает USB камеры. С IP подход также несколько иной. Бесплатно поддерживается только одна камера, но за отдельную плату их число можно расширить. Одна лицензия стоит в районе $60. При этом производитель не выделяет отдельно линейку систем хранения и IP-видеорегистраторов. Каждый NAS Synology обладает встроенной службой видеорегистрации Surveillance Station и является полнофункциональным IP-видеорегистратором, способным одновременно записывать видео с нескольких IP-камер - до пятидесяти в зависимости от модели. Тестируемый мною DS212j поддерживает пять IP-камер. 
BitTorrent

Уверен, абсолютное большинство энтузиастов используют этот протокол для скачивания патчей World of Warcraft и дистрибутивов Линукса. Многие выбирают NAS, исходя из его возможности работы с BitTorrent.

ASUS TS mini

Угадайте, поддерживает ли он BitTorrent? Не угадали. Он его поддерживает при помощи WHS плагина для управления популярнейшим клиентом – uTorrent. К сожалению, автор плагина перестал развивать проект и не реализовал поддержку версий выше 1.x. С детальной инструкцией по установке можно ознакомиться здесь.

500x406 19 KB
500x353 17 KB. Big one: 1008x711 32 KB

Производительность TS-mini оказалась достаточной, чтобы освоить 100-мбитный канал. Логика работы плагина основана на преобразовании веб-интерфейса uTorrent, причем в сильно урезанном формате. Доступны только простейшие операции: добавить, запустить, остановить, удалить. Думаю, лучше использовать WebUI напрямую, нужно только не забыть заставить uTorrent запускаться автоматически в качестве службы.

QNAP TS-212

Download station умеет работать с торрентами, HTTP, FTP и RapidShare. Зеленый крестик открывает меню загрузки torrent файла с локального компьютера, после нажатия кнопки «выполнить» начинается закачка.

Настройки позволяют определить недельное расписание, задать максимальное число загрузок, порт входящих соединений, ограничение скорости, и даже шифрование трафика.

500x354 24 KB. Big one: 1003x710 39 KB

Производительность хорошая, но не рекордная. На таких скоростях процессор уже был загружен на 100%. Многотерабайтный сидбокс на гигабитном канале из TS-212 не получится, но для простых пользователей его будет достаточно.

Synology DS212j

Менеджер загрузок Synology не уступает и даже превосходит QNAP в возможностях и богатстве настроек. Позволяет качать с BT, HTTP, FTP, NZB (usenet) и eMule. Из файловых хостингов кроме RapidShare поддерживаются десятки других. Можно даже отправить email по завершении закачки (хотя это не проверено).

500x354 29 KB. Big one: 1003x710 38 KB

Веб-службы и прочие сервисы

Помимо вышеописанных возможностей, у участников тестирования есть и уникальные функции.

ASUS TS mini

Windows Home Server умеет делать резервные копии, причем не просто копии, а полные образы дисков, которые можно восстанавливать на голое железо. Это одна из важнейших причин использовать WHS Connector. Суммарно поддерживается до десяти пользовательских компьютеров.

600x422 38 KB. Big one: 1007x709 80 KB

32 Гбайта системного диска сжались до 22 Гбайт за 22 минуты 18 секунд. Из бэкапа автоматически исключаются файлы pagefile.sys, hiberfil.sys, папка временных файлов и корзина. Архивацией занимается клиентский компьютер.

Посмотреть сохраненные копии без восстановления можно только средствами консоли, она монтирует бэкап как букву диска. Физически копия представляет собой набор dat файлов.

Возможность восстановления также была проверена. Для этого необходимо загрузить компьютер с соответствующего диска из комплекта TS Mini.

500x321 32 KB

После обнаружения и соединения с сервером будет дан выбор, какой компьютер нужно восстанавливать, бэкап от какой даты использовать и нужно ли ставить дополнительные драйверы.

500x314 28 KB

Далее останется выбрать, какие логические тома подлежат восстановлению и дождаться окончания процесса.

500x317 33 KB

Хорошая замена Acronis True Image и Norton Ghost.

Веб-служба Windows Home Server состоит из двух сервисов. Доступ к папкам в хранилище и удаленный доступ на клиентские компьютеры внутри сети.

500x353 22 KB. Big one: 1008x711 62 KB

Файловый менеджер слабый. Нормально можно работать только с одиночными файлами. Если требуется скачать с сервера несколько файлов или папку целиком, будет предложена архивация в zip или создание sfx архива. Других вариантов нет. Залить папку на сервер нельзя. Как говорится, поднимайте FTP.

500x352 17 KB. Big one: 1009x711 37 KB

А удаленный доступ – куда более интересная функция. Она работает только из Internet Explorer, благодаря ActiveX, зато клиентским компьютерам доступ в Интернет уже необязателен, достаточно, чтобы их видел TS mini.

500x353 16 KB. Big one: 1008x711 41 KB

Windows 7 по умолчанию принимает подключения удаленного доступа только с проверкой подлинности, Home Server о таком режиме не знает и считает, что компьютер недоступен. Если же разрешить все подключения, то получится такой вот непривычный режим удаленного доступа в браузере.

500x461 20 KB

QNAP TS-212

Web File Manager позволяет проводить основные операции с файлами. К сожалению, как и в WHS, залить папку на сервер этим способом невозможно, но есть возможность монтировать ISO образ как папку.

500x354 22 KB. Big one: 1003x710 30 KB

Multimedia station работает с контентом, хранящимся в папке Multimedia. Распознает аудио в формате .mp3, картинки в .jpg, .gif и .png, видео в .flv, и .mpeg4 (кодеки H.264 + AAC). Возможно, кому-то будет интересно послушать свою аудиоколекцию в командировках или похвастаться фотографиями, но, честно говоря, сервис слабый, особенно в части переваривания различных видеоформатов.

500x354 17 KB. Big one: 1003x710 23 KB

Synology DS212j

Audio Station умеет проигрывать в браузере музыку из хранилища, транслировать интернет-радио и DLNA/UPnP серверы. Поддерживает Apple AirPlay. Если есть совместимые USB динамики, может играть сразу через них.

500x283 35 KB. Big one: 1060x600 47 KB

Photo Station. Создает фотоальбом на основе того, что выложено в папке Photo и даже позволяет вести блоги, если вам не нравится ни одна из известных социальных сетей.

500x354 21 KB. Big one: 1003x710 25 KB

File Station - открывает доступ к файлам через сеть. Здесь, как в «Проводнике» главного интерфейса, доступно копирование папки с компьютера на сервер. Очень полезный и грамотно реализованный сервис.

500x354 22 KB. Big one: 1003x710 35 KB

Тестовый стенд и методика тестирования

Тестовый стенд:

    Материнская плата: ASUS P6T Deluxe (BIOS 2209);
    Процессор: Intel Core i7-920, 3.8 ГГц (181 х 21);
    Система охлаждения: Thermalright IFX-14 + Scythe Ultra Kaze 120;
    Оперативная память: OCZ OCZ3P1600LV6GK PC3-12800 (1440 МГц, 7-8-8-16) 3x2 Гбайта;
    Системный диск: SSD Crucial M4, 64 Гбайта;
    Видеокарта: ASUS GTX 580 DirectCu II, 1.5 Гбайта GDDR5;
    Блок питания: Corsair HX850W, 850 Вт.
    Жесткие диски для NAS: WD Caviar Black WD1002FAEX, 1 Тбайт.

Системное ПО:

    Операционная система: Windows 7 x64 SP1 Ultimate RUS;
    Обновления операционной системы: все на 05.01.2012;
    Драйвер для видеокарты: nVIDIA ForceWare 275.33;
    Драйвер для SATA контроллера: Intel RST 10.8, контроллер работает в режиме RAID.

Методика тестирования

Глобальные настройки:

    В ОС не установлен никакой антивирус, способный влиять на замеры производительности дисков, в том числе Windows Defender.
    Отключена служба индексирования файлов, по той же причине.
    Отключен Windows UAC, который делал невозможным работу некоторых тестовых программ.
    В момент снятия замеров не используются программы фонового мониторинга типа Crystal Disk info, HWMonitor, счетчиков perfmon и прочих.
    Кэш записи iSCSI дисков выключен, как это сделано по умолчанию.

Набор тестовых приложений следующий:

    Crystal Disk Mark 3.0 x64. Завоевавший популярность тест, который позволяет измерить скорость диска в восьми режимах: чтение и запись при последовательном доступе, в случайном режиме крупными блоками по 512 Кбайт, мелкими блоками по 4 Кбайта и те же 4-Кбайтные запросы при длине очереди к диску в 32 запроса (проверка эффективности работы NCQ и механизмов распараллеливания нагрузки). Я использовал настройки по умолчанию, а именно пятикратный прогон на участке 1000 Мбайт.
    Intel NAS Performance Toolkit 1.7.1. NASPT – очень мощный тест, сопоставимый по функционалу с IOMeter и разработанный в первую очередь для тестирования сетевых накопителей. Использовался как базовый функционал, так и свой шаблон Torrent.
    FC-test 1.0 build 11. В качестве тестовых наборов использовались шаблоны Install (414 файлов общим объёмом 575 Мбайт), ISO (3 файла общим объёмом 1600 Мбайт) и Programs (8504 файла общим объёмом 1380 Мбайт). Для каждого набора измерялась скорость записи всего набора файлов на диск (тест Сreate), скорость чтения этих файлов с диска (Read),и скорость копирования в соседнюю папку.
    Перед началом каждого замера компьютер перезагружался, весь процесс полностью автоматизирован.

Тестирование производительности

Я поздно обнаружил возможность шифрования у Synology DS212j, а отдавать его нужно было быстро, поэтому тесты с шифрованием сделаны только в Crystal Disk Mark.

Crystal Disk Mark

Скорость линейного чтения, Мбайт/с
Asus TS mini	
57	 
QNAP TS-212 (RAID-0)	
61	 
QNAP TS-212 (RAID-0 iSCSI)	
55	 
QNAP TS-212 (RAID-1)	
61	 
QNAP TS-212 (RAID-1 iSCSI)	
54	 
Synology DS212j (RAID-0)	
65	 
Synology DS212j (RAID-0 iSCSI-file)	
63	 
Synology DS212j (RAID-0 iSCSI-LUN)	
80
Synology DS212j (RAID-0 шифр.)	
19	 
Synology DS212j (RAID-1)	
65	 
Synology DS212j (RAID-1 iSCSI-file)	
65	 
Synology DS212j (RAID-1 iSCSI-LUN)	
79	 
Synology DS212j (RAID-1 шифр.)	
19	 
Synology DS212j (SHR)	
65	 
Synology DS212j (SHR iSCSI-file)	
64	 
Synology DS212j (SHR шифр.)	
19	 
 	
 	 	 	 
 	
0	 	20	 	40	 	60	 	80

Здесь можно выделить следующие ключевые моменты: Во-первых, DS212j обошел конкурентов, а его блочный iSCSI вообще творит чудеса. Во-вторых, линейная скорость не зависит от уровня RAID и ограничивается процессорами NAS. В-третьих, шифрование без аппаратной поддержки очень влияет на производительность - не удалось достичь даже 20 Мбайт/с.

Скорость линейной записи, Мбайт/с
Asus TS mini	
44	 
QNAP TS-212 (RAID-0)	
49	 
QNAP TS-212 (RAID-0 iSCSI)	
40	 
QNAP TS-212 (RAID-1)	
44	 
QNAP TS-212 (RAID-1 iSCSI)	
33	 
Synology DS212j (RAID-0)	
72	 
Synology DS212j (RAID-0 iSCSI-file)	
42	 
Synology DS212j (RAID-0 iSCSI-LUN)	
71	 
Synology DS212j (RAID-0 шифр.)	
10	 
Synology DS212j (RAID-1)	
64	 
Synology DS212j (RAID-1 iSCSI-file)	
40	 
Synology DS212j (RAID-1 iSCSI-LUN)	
78
Synology DS212j (RAID-1 шифр.)	
9.7	 
Synology DS212j (SHR)	
60	 
Synology DS212j (SHR iSCSI-file)	
39	 
Synology DS212j (SHR шифр.)	
9.6	 
 	
 	 	 	 
 	
0	 	20	 	40	 	60	 

Запись больно бьет по файловой реализации iSCSI Synology, а доступ к шифрованной папке замедляется вообще в два раза. iSCSI у QNAP работает всегда медленнее SMB.

Скорость случайного чтения (блок 512 Кбайт), Мбайт/с
Asus TS mini	
57
QNAP TS-212 (RAID-0)	
24	 
QNAP TS-212 (RAID-0 iSCSI)	
21	 
QNAP TS-212 (RAID-1)	
30	 
QNAP TS-212 (RAID-1 iSCSI)	
21	 
Synology DS212j (RAID-0)	
27	 
Synology DS212j (RAID-0 iSCSI-file)	
24	 
Synology DS212j (RAID-0 iSCSI-LUN)	
34	 
Synology DS212j (RAID-0 шифр.)	
 	5.9
Synology DS212j (RAID-1)	
31	 
Synology DS212j (RAID-1 iSCSI-file)	
30	 
Synology DS212j (RAID-1 iSCSI-LUN)	
35	 
Synology DS212j (RAID-1 шифр.)	
 	6.2
Synology DS212j (SHR)	
31	 
Synology DS212j (SHR iSCSI-file)	
30	 
Synology DS212j (SHR шифр.)	
 	6.1
 	
 	 	 	 	 	 
 	
0	 	10	 	20	 	30	 	40	 	50	 

Знаете, почему ASUS так неожиданно вырвался вперед? Всё дело в кэшировании. У TS mini на борту 2 Гбайта памяти и тестовый файл помещается туда целиком. Вот как выглядит процесс записи файла объемом 700 Мбайт на сервер и затем чтение с него:

600x430 29 KB

При копировании на сервер процессор занят обслуживанием сети и разгоняет ее свыше 90 Мбайт/с. С компьютера всё улетает быстро, сервер рапортует, что всё принял, а сам начинает активно писать на диск только по окончании передачи. Лучше не думать, что произойдет, если в этот момент отключится электропитание.

Если попытаться считать то, что было только что записано, опять отработает кэш, который хранит последние используемые данные. Он отдаст файл в сеть на предельной скорости гигабитной сети, вообще не обращаясь к жесткому диску. Но не всегда такие хитрости могут помочь. Когда кэш забивается, диски вынуждены выполнять и текущие задания, и то, что они пообещали сделать заочно. Дальнейшие результаты покажут логику поведения.

Скорость случайной записи (блок 512 Кбайт), Мбайт/с
Asus TS mini	
35	 
QNAP TS-212 (RAID-0)	
48	 
QNAP TS-212 (RAID-0 iSCSI)	
39	 
QNAP TS-212 (RAID-1)	
44	 
QNAP TS-212 (RAID-1 iSCSI)	
34	 
Synology DS212j (RAID-0)	
72	 
Synology DS212j (RAID-0 iSCSI-file)	
43	 
Synology DS212j (RAID-0 iSCSI-LUN)	
79
Synology DS212j (RAID-0 шифр.)	
 	8.4
Synology DS212j (RAID-1)	
64	 
Synology DS212j (RAID-1 iSCSI-file)	
43	 
Synology DS212j (RAID-1 iSCSI-LUN)	
76	 
Synology DS212j (RAID-1 шифр.)	
 	8.3
Synology DS212j (SHR)	
60	 
Synology DS212j (SHR iSCSI-file)	
40	 
Synology DS212j (SHR шифр.)	
 	8.4
 	
 	 	 	 
 	
0	 	20	 	40	 	60	 

Хорошую скорость сохраняет только Synology.

Скорость случайного чтения (блок 4 Кбайт), Мбайт/с
Asus TS mini	
9
QNAP TS-212 (RAID-0)	
 	0.54
QNAP TS-212 (RAID-0 iSCSI)	
 	0.7
QNAP TS-212 (RAID-1)	
 	0.67
QNAP TS-212 (RAID-1 iSCSI)	
 	0.65
Synology DS212j (RAID-0)	
 	0.76
Synology DS212j (RAID-0 iSCSI-file)	
 	0.74
Synology DS212j (RAID-0 iSCSI-LUN)	
 	0.65
Synology DS212j (RAID-0 шифр.)	
 	0.6
Synology DS212j (RAID-1)	
 	0.73
Synology DS212j (RAID-1 iSCSI-file)	
 	0.73
Synology DS212j (RAID-1 iSCSI-LUN)	
 	0.61
Synology DS212j (RAID-1 шифр.)	
 	0.64
Synology DS212j (SHR)	
 	0.73
Synology DS212j (SHR iSCSI-file)	
 	0.73
Synology DS212j (SHR шифр.)	
 	0.64
 	
 	 	 	 	 
 	
0	 	2	 	4	 	6	 	8	 

Какой хитрый Windows с 2 Гбайтами памяти! Ситуация, которую я только что описывал, проявилась еще ярче. Прочие участники держатся плотной группой.

Скорость случайной записи (блок 4 Кбайт), Мбайт/с
Asus TS mini	
2.3	 
QNAP TS-212 (RAID-0)	
4.2	 
QNAP TS-212 (RAID-0 iSCSI)	
3.6	 
QNAP TS-212 (RAID-1)	
2.3	 
QNAP TS-212 (RAID-1 iSCSI)	
1.8	 
Synology DS212j (RAID-0)	
6.2
Synology DS212j (RAID-0 iSCSI-file)	
5.4	 
Synology DS212j (RAID-0 iSCSI-LUN)	
2.7	 
Synology DS212j (RAID-0 шифр.)	
 	0.67
Synology DS212j (RAID-1)	
4.5	 
Synology DS212j (RAID-1 iSCSI-file)	
2.9	 
Synology DS212j (RAID-1 iSCSI-LUN)	
1.4	 
Synology DS212j (RAID-1 шифр.)	
 	0.52
Synology DS212j (SHR)	
2.1	 
Synology DS212j (SHR iSCSI-file)	
2.2	 
Synology DS212j (SHR шифр.)	
 	0.51
 	
 	 	 	 
 	
0	 	2	 	4	 	6

Запись мелкими блоками тяжело дается всем. Более-менее держатся только массивы RAID-0.

Скорость случайного чтения (блок 4 Кбайт, длина очереди 32), Мбайт/с
Asus TS mini	
 
QNAP TS-212 (RAID-0)	
0.78	 
QNAP TS-212 (RAID-0 iSCSI)	
0.8	 
QNAP TS-212 (RAID-1)	
0.73	 
QNAP TS-212 (RAID-1 iSCSI)	
0.59	 
Synology DS212j (RAID-0)	
0.74	 
Synology DS212j (RAID-0 iSCSI-file)	
0.79	 
Synology DS212j (RAID-0 iSCSI-LUN)	
2.7
Synology DS212j (RAID-0 шифр.)	
0.6	 
Synology DS212j (RAID-1)	
0.76	 
Synology DS212j (RAID-1 iSCSI-file)	
0.74	 
Synology DS212j (RAID-1 iSCSI-LUN)	
2.1	 
Synology DS212j (RAID-1 шифр.)	
0.65	 
Synology DS212j (SHR)	
0.63	 
Synology DS212j (SHR iSCSI-file)	
0.77	 
Synology DS212j (SHR шифр.)	
0.69	 
 	
 	 	 	 	 	 
 	
0	 	0.5	 	1	 	1.5	 	2	 	2.5	 

Ну здесь ASUS я просто дисквалифицировал, чтобы не засорял график. В то время как честные труженики показали единицы Мбайт/с, TS mini выдал 68!

Скорость случайной записи (блок 4 Кбайт, длина очереди 32), Мбайт/с
Asus TS mini	
7.5	 
QNAP TS-212 (RAID-0)	
3.1	 
QNAP TS-212 (RAID-0 iSCSI)	
3.4	 
QNAP TS-212 (RAID-1)	
2.4	 
QNAP TS-212 (RAID-1 iSCSI)	
1.5	 
Synology DS212j (RAID-0)	
4.9	 
Synology DS212j (RAID-0 iSCSI-file)	
7.9
Synology DS212j (RAID-0 iSCSI-LUN)	
3	 
Synology DS212j (RAID-0 шифр.)	
 	0.76
Synology DS212j (RAID-1)	
4.4	 
Synology DS212j (RAID-1 iSCSI-file)	
2.6	 
Synology DS212j (RAID-1 iSCSI-LUN)	
1.5	 
Synology DS212j (RAID-1 шифр.)	
 	0.5
Synology DS212j (SHR)	
6.8	 
Synology DS212j (SHR iSCSI-file)	
5.9	 
Synology DS212j (SHR шифр.)	
 	0.51
 	
 	 	 	 
 	
0	 	2	 	4	 	6	 

Synology остается фаворитом, хотя он основан на той же аппаратной платформе, что и QNAP. 
Intel NAS Performance Toolkit

HD Video Playback, Мбайт/с
Asus TS mini	
56	 
QNAP TS-212 (RAID-0)	
71	 
QNAP TS-212 (RAID-0 iSCSI)	
56	 
QNAP TS-212 (RAID-1)	
76	 
QNAP TS-212 (RAID-1 iSCSI)	
55	 
Synology DS212j (RAID-0)	
83	 
Synology DS212j (RAID-0 iSCSI-file)	
62	 
Synology DS212j (RAID-0 iSCSI-LUN)	
78	 
Synology DS212j (RAID-1)	
88	 
Synology DS212j (RAID-1 iSCSI-file)	
62	 
Synology DS212j (RAID-1 iSCSI-LUN)	
77	 
Synology DS212j (SHR)	
83	 
Synology DS212j (SHR iSCSI-file)	
62	 

2x HD Playback, Мбайт/с
Asus TS mini	
80	 
QNAP TS-212 (RAID-0)	
87	 
QNAP TS-212 (RAID-0 iSCSI)	
56	 
QNAP TS-212 (RAID-1)	
86	 
QNAP TS-212 (RAID-1 iSCSI)	
56	 
Synology DS212j (RAID-0)	
97	 
Synology DS212j (RAID-0 iSCSI-file)	
71	 
Synology DS212j (RAID-0 iSCSI-LUN)	
90	 
Synology DS212j (RAID-1)	
98	 
Synology DS212j (RAID-1 iSCSI-file)	
71	 
Synology DS212j (RAID-1 iSCSI-LUN)	
94	 
Synology DS212j (SHR)	
96	 
Synology DS212j (SHR iSCSI-file)	
70	 

4x HD Playback, Мбайт/с
Asus TS mini	
82	 
QNAP TS-212 (RAID-0)	
87	 
QNAP TS-212 (RAID-0 iSCSI)	
56	 
QNAP TS-212 (RAID-1)	
88	 
QNAP TS-212 (RAID-1 iSCSI)	
56	 
Synology DS212j (RAID-0)	
97	 
Synology DS212j (RAID-0 iSCSI-file)	
70	 
Synology DS212j (RAID-0 iSCSI-LUN)	
98	 
Synology DS212j (RAID-1)	
100	 
Synology DS212j (RAID-1 iSCSI-file)	
70	 
Synology DS212j (RAID-1 iSCSI-LUN)	
103
Synology DS212j (SHR)	
99	 
Synology DS212j (SHR iSCSI-file)	
69	 
 	
 	 	 	 	 	 
 	
0	 	20	 	40	 	60	 	80	 	100

HD Video Record, Мбайт/с
Asus TS mini	
81	 
QNAP TS-212 (RAID-0)	
99	 
QNAP TS-212 (RAID-0 iSCSI)	
75	 
QNAP TS-212 (RAID-1)	
88	 
QNAP TS-212 (RAID-1 iSCSI)	
68	 
Synology DS212j (RAID-0)	
138	 
Synology DS212j (RAID-0 iSCSI-file)	
80	 
Synology DS212j (RAID-0 iSCSI-LUN)	
156
Synology DS212j (RAID-1)	
122	 
Synology DS212j (RAID-1 iSCSI-file)	
80	 
Synology DS212j (RAID-1 iSCSI-LUN)	
151	 
Synology DS212j (SHR)	
113	 
Synology DS212j (SHR iSCSI-file)	
78	 
 	
 	 	 	 
 	
0	 	50	 	100	 	150

HD Video Playback and Record, Мбайт/с
Asus TS mini	
31	 
QNAP TS-212 (RAID-0)	
62	 
QNAP TS-212 (RAID-0 iSCSI)	
71	 
QNAP TS-212 (RAID-1)	
55	 
QNAP TS-212 (RAID-1 iSCSI)	
67	 
Synology DS212j (RAID-0)	
77	 
Synology DS212j (RAID-0 iSCSI-file)	
88	 
Synology DS212j (RAID-0 iSCSI-LUN)	
117
Synology DS212j (RAID-1)	
73	 
Synology DS212j (RAID-1 iSCSI-file)	
80	 
Synology DS212j (RAID-1 iSCSI-LUN)	
114	 
Synology DS212j (SHR)	
69	 
Synology DS212j (SHR iSCSI-file)	
84	 
 	
 	 	 	 	 	 
 	
0	 	20	 	40	 	60	 	80	 	100	 

Content Creation, Мбайт/с
Asus TS mini	
2.5	 
QNAP TS-212 (RAID-0)	
7.1	 
QNAP TS-212 (RAID-0 iSCSI)	
5	 
QNAP TS-212 (RAID-1)	
6	 
QNAP TS-212 (RAID-1 iSCSI)	
5.7	 
Synology DS212j (RAID-0)	
9.1	 
Synology DS212j (RAID-0 iSCSI-file)	
7.5	 
Synology DS212j (RAID-0 iSCSI-LUN)	
14
Synology DS212j (RAID-1)	
7.9	 
Synology DS212j (RAID-1 iSCSI-file)	
7	 
Synology DS212j (RAID-1 iSCSI-LUN)	
13	 
Synology DS212j (SHR)	
7.5	 
Synology DS212j (SHR iSCSI-file)	
6.3	 
 	
 	 	 
 	
0	 	5	 	10	 

Office Productivity, Мбайт/с
Asus TS mini	
23	 
QNAP TS-212 (RAID-0)	
46	 
QNAP TS-212 (RAID-0 iSCSI)	
52	 
QNAP TS-212 (RAID-1)	
40	 
QNAP TS-212 (RAID-1 iSCSI)	
50	 
Synology DS212j (RAID-0)	
52	 
Synology DS212j (RAID-0 iSCSI-file)	
56	 
Synology DS212j (RAID-0 iSCSI-LUN)	
57
Synology DS212j (RAID-1)	
49	 
Synology DS212j (RAID-1 iSCSI-file)	
53	 
Synology DS212j (RAID-1 iSCSI-LUN)	
54	 
Synology DS212j (SHR)	
49	 
Synology DS212j (SHR iSCSI-file)	
54	 
 	
 	 	 	 	 	 
 	
0	 	10	 	20	 	30	 	40	 	50	 

File Copy To NAS, Мбайт/с
Asus TS mini	
113	 
QNAP TS-212 (RAID-0)	
111	 
QNAP TS-212 (RAID-0 iSCSI)	
87	 
QNAP TS-212 (RAID-1)	
98	 
QNAP TS-212 (RAID-1 iSCSI)	
74	 
Synology DS212j (RAID-0)	
157	 
Synology DS212j (RAID-0 iSCSI-file)	
94	 
Synology DS212j (RAID-0 iSCSI-LUN)	
177
Synology DS212j (RAID-1)	
140	 
Synology DS212j (RAID-1 iSCSI-file)	
88	 
Synology DS212j (RAID-1 iSCSI-LUN)	
176	 
Synology DS212j (SHR)	
130	 
Synology DS212j (SHR iSCSI-file)	
90	 
 	
 	 	 	 
 	
0	 	50	 	100	 	150	 

File Copy From NAS, Мбайт/с
Asus TS mini	
53	 
QNAP TS-212 (RAID-0)	
74	 
QNAP TS-212 (RAID-0 iSCSI)	
48	 
QNAP TS-212 (RAID-1)	
73	 
QNAP TS-212 (RAID-1 iSCSI)	
49	 
Synology DS212j (RAID-0)	
76	 
Synology DS212j (RAID-0 iSCSI-file)	
55	 
Synology DS212j (RAID-0 iSCSI-LUN)	
65	 
Synology DS212j (RAID-1)	
78	 
Synology DS212j (RAID-1 iSCSI-file)	
56	 
Synology DS212j (RAID-1 iSCSI-LUN)	
61	 
Synology DS212j (SHR)	
79
Synology DS212j (SHR iSCSI-file)	
57	 
 	
 	 	 	 
 	
0	 	20	 	40	 	60	 

Directory Copy To NAS, Мбайт/с
Asus TS mini	
 	3.4
QNAP TS-212 (RAID-0)	
 	12
QNAP TS-212 (RAID-0 iSCSI)	
448	 
QNAP TS-212 (RAID-1)	
 	12
QNAP TS-212 (RAID-1 iSCSI)	
268	 
Synology DS212j (RAID-0)	
 	15
Synology DS212j (RAID-0 iSCSI-file)	
519
Synology DS212j (RAID-0 iSCSI-LUN)	
476	 
Synology DS212j (RAID-1)	
 	15
Synology DS212j (RAID-1 iSCSI-file)	
478	 
Synology DS212j (RAID-1 iSCSI-LUN)	
406	 
Synology DS212j (SHR)	
 	15
Synology DS212j (SHR iSCSI-file)	
426	 
 	
 	 	 	 	 	 
 	
0	 	100	 	200	 	300	 	400	 	500

Directory Copy from NAS, Мбайт/с
Asus TS mini	
7.9	 
QNAP TS-212 (RAID-0)	
18	 
QNAP TS-212 (RAID-0 iSCSI)	
29	 
QNAP TS-212 (RAID-1)	
16	 
QNAP TS-212 (RAID-1 iSCSI)	
28	 
Synology DS212j (RAID-0)	
21	 
Synology DS212j (RAID-0 iSCSI-file)	
32	 
Synology DS212j (RAID-0 iSCSI-LUN)	
33
Synology DS212j (RAID-1)	
20	 
Synology DS212j (RAID-1 iSCSI-file)	
30	 
Synology DS212j (RAID-1 iSCSI-LUN)	
29	 
Synology DS212j (SHR)	
20	 
Synology DS212j (SHR iSCSI-file)	
32	 
 	
 	 	 	 
 	
0	 	10	 	20	 	30	 

Photo Album, Мбайт/с
Asus TS mini	
6.2	 
QNAP TS-212 (RAID-0)	
7.5	 
QNAP TS-212 (RAID-0 iSCSI)	
11	 
QNAP TS-212 (RAID-1)	
7.4	 
QNAP TS-212 (RAID-1 iSCSI)	
11	 
Synology DS212j (RAID-0)	
7.9	 
Synology DS212j (RAID-0 iSCSI-file)	
11	 
Synology DS212j (RAID-0 iSCSI-LUN)	
9.4	 
Synology DS212j (RAID-1)	
7.9	 
Synology DS212j (RAID-1 iSCSI-file)	
11	 
Synology DS212j (RAID-1 iSCSI-LUN)	
10	 
Synology DS212j (SHR)	
7.9	 
Synology DS212j (SHR iSCSI-file)	
12
 	
 	 	 	 	 	 
 	
0	 	2	 	4	 	6	 	8	 	10	 	12

Torrent, Мбайт/с
Asus TS mini	
21	 
QNAP TS-212 (RAID-0)	
31	 
QNAP TS-212 (RAID-0 iSCSI)	
27	 
QNAP TS-212 (RAID-1)	
30	 
QNAP TS-212 (RAID-1 iSCSI)	
28	 
Synology DS212j (RAID-0)	
33
Synology DS212j (RAID-0 iSCSI-file)	
28	 
Synology DS212j (RAID-0 iSCSI-LUN)	
33
Synology DS212j (RAID-1)	
33
Synology DS212j (RAID-1 iSCSI-file)	
30	 
Synology DS212j (RAID-1 iSCSI-LUN)	
26	 
Synology DS212j (SHR)	
33
Synology DS212j (SHR iSCSI-file)	
30	 
 	
 	 	 	 
 	
0	 	10	 	20	 	30	 

В этом бенчмарке в тестах на запись нас пытались обмануть iSCSI диски за счет кэширования на клиентском компьютере. Странно, ведь политика кэша запрещала это делать. В тестах на чтение iSCSI диски были то медленнее SMB, то быстрее, но среди устройств почти всюду побеждал DS212j.

FC-test

Тест Create был совершенно испорчен кэшем тестовой машины – iSCSI диски показывали в нем гигабайты в секунду, поэтому я не публикую его результаты.

Read

ISO, Мбайт/с
Asus TS mini	
52	 
QNAP TS-212 (RAID-0)	
64	 
QNAP TS-212 (RAID-0 iSCSI)	
53	 
QNAP TS-212 (RAID-1)	
51	 
QNAP TS-212 (RAID-1 iSCSI)	
52	 
Synology DS212j (RAID-0)	
79
Synology DS212j (RAID-0 iSCSI-file)	
62	 
Synology DS212j (RAID-0 iSCSI-LUN)	
74	 
Synology DS212j (RAID-1)	
62	 
Synology DS212j (RAID-1 iSCSI-file)	
61	 
Synology DS212j (RAID-1 iSCSI-LUN)	
78	 
Synology DS212j (SHR)	
59	 
Synology DS212j (SHR iSCSI-file)	
61	 

Install, Мбайт/с
Asus TS mini	
55	 
QNAP TS-212 (RAID-0)	
47	 
QNAP TS-212 (RAID-0 iSCSI)	
47	 
QNAP TS-212 (RAID-1)	
35	 
QNAP TS-212 (RAID-1 iSCSI)	
36	 
Synology DS212j (RAID-0)	
54	 
Synology DS212j (RAID-0 iSCSI-file)	
55	 
Synology DS212j (RAID-0 iSCSI-LUN)	
63	 
Synology DS212j (RAID-1)	
42	 
Synology DS212j (RAID-1 iSCSI-file)	
52	 
Synology DS212j (RAID-1 iSCSI-LUN)	
62	 
Synology DS212j (SHR)	
42	 
Synology DS212j (SHR iSCSI-file)	
50	 

Programs, Мбайт/с
Asus TS mini	
10	 
QNAP TS-212 (RAID-0)	
18	 
QNAP TS-212 (RAID-0 iSCSI)	
33	 
QNAP TS-212 (RAID-1)	
16	 
QNAP TS-212 (RAID-1 iSCSI)	
31	 
Synology DS212j (RAID-0)	
22	 
Synology DS212j (RAID-0 iSCSI-file)	
37	 
Synology DS212j (RAID-0 iSCSI-LUN)	
40	 
Synology DS212j (RAID-1)	
20	 
Synology DS212j (RAID-1 iSCSI-file)	
35	 
Synology DS212j (RAID-1 iSCSI-LUN)	
38	 
Synology DS212j (SHR)	
20	 
Synology DS212j (SHR iSCSI-file)	
36	 
 	
 	 	 	 
 	
0	 	20	 	40	 	60	 

На больших файлах все идут более-менее ровно, а вот в Programs диски iSCSI заняли первые места с большим отрывом.

Copy

ISO, Мбайт/с
Asus TS mini	
29	 
QNAP TS-212 (RAID-0)	
28	 
QNAP TS-212 (RAID-0 iSCSI)	
27	 
QNAP TS-212 (RAID-1)	
22	 
QNAP TS-212 (RAID-1 iSCSI)	
25	 
Synology DS212j (RAID-0)	
37	 
Synology DS212j (RAID-0 iSCSI-file)	
33	 
Synology DS212j (RAID-0 iSCSI-LUN)	
49
Synology DS212j (RAID-1)	
26	 
Synology DS212j (RAID-1 iSCSI-file)	
31	 
Synology DS212j (RAID-1 iSCSI-LUN)	
48	 
Synology DS212j (SHR)	
26	 
Synology DS212j (SHR iSCSI-file)	
31	 

Install, Мбайт/с
Asus TS mini	
28	 
QNAP TS-212 (RAID-0)	
21	 
QNAP TS-212 (RAID-0 iSCSI)	
29	 
QNAP TS-212 (RAID-1)	
15	 
QNAP TS-212 (RAID-1 iSCSI)	
21	 
Synology DS212j (RAID-0)	
26	 
Synology DS212j (RAID-0 iSCSI-file)	
35	 
Synology DS212j (RAID-0 iSCSI-LUN)	
49
Synology DS212j (RAID-1)	
20	 
Synology DS212j (RAID-1 iSCSI-file)	
30	 
Synology DS212j (RAID-1 iSCSI-LUN)	
43	 
Synology DS212j (SHR)	
20	 
Synology DS212j (SHR iSCSI-file)	
28	 

Programs, Мбайт/с
Asus TS mini	
 	2.9
QNAP TS-212 (RAID-0)	
8.6	 
QNAP TS-212 (RAID-0 iSCSI)	
18	 
QNAP TS-212 (RAID-1)	
7.5	 
QNAP TS-212 (RAID-1 iSCSI)	
15	 
Synology DS212j (RAID-0)	
11	 
Synology DS212j (RAID-0 iSCSI-file)	
20	 
Synology DS212j (RAID-0 iSCSI-LUN)	
29	 
Synology DS212j (RAID-1)	
9.7	 
Synology DS212j (RAID-1 iSCSI-file)	
17	 
Synology DS212j (RAID-1 iSCSI-LUN)	
24	 
Synology DS212j (SHR)	
9.6	 
Synology DS212j (SHR iSCSI-file)	
17	 
 	
 	 	 	 	 
 	
0	 	10	 	20	 	30	 	40	 

Во время копирования ситуация примерно та же. Лидерами являются iSCSI диски Synology.

Температурный режим, энергопотребление и уровень шума

Температуры

Практика показала, что максимальный прогрев NAS достигается во время последовательной записи на RAID-1, хотя сами диски из-за слабых процессоров во всех ситуациях загружены не полностью. Данный процесс длился полчаса. Температуры нормированы относительно 25° С в комнате, реально она колебалась в пределах трёх градусов. На графиках отражена температура более горячего диска.

Простой | Нагрузка, °С
Asus TS mini	
46	 	49
QNAP TS-212	
40	 	41
Synology DS212j	
36	 	37
 	
 	 	 	 	 	 
 	
0	 	10	 	20	 	30	 	40	 	50	 

В принципе даже TS mini справился с заданием и удержал температуру в разумных пределах. И не забывайте, что это «Блэки» WD, а большинство людей будет ставить экономичные «пятитысячники». И всё же большой вентилятор DS212j сделал свое дело на «отлично». С ним температуры накопителей не достигали и 40° С.

Энергопотребление

Энергопотребление замерялось с помощью Zalman ZM-MFC2. Это, конечно, не лабораторный прибор, но правдоподобность его показаний была проверена на десятках измерений и негодования не вызывает.

Простой | Нагрузка, Вт
Asus TS mini	
32	38
QNAP TS-212	
23	 	26
Synology DS212j	
23	 	27
 	
 	 	 	 
 	
0	 	10	 	20	 	30	 

Вполне логично, что Atom в простое оказался более прожорлив, чем ARM процессоры в нагрузке. Дополнительно стоит сказать о спящем режиме.

    У TS mini диски не останавливаются в принципе, настроек в панели управления электропитанием они не слушаются.
    QNAP с остановленными дисками потребляет 10 Вт.
    А Synology в режиме глубокого сна отключился настолько, что индикатор показал ноль! Реально там отнюдь не ноль, погрешность измерений в этом диапазоне может быть очень большой, но точно можно сказать, что это меньше, чем QNAP. 

Уровень шума

Мерить аппаратурой или записывать микрофоном едва слышимые звуки нет смысла, поэтому опишу ситуацию словами.

    Вентиляторы у TS mini сами по себе шумят не громко, хотя ночью могут вызывать дискомфорт. Главное, не понравилось то, что Windows живет своей жизнью, постоянно что-то внутри себя делает и щелкает дисками, даже когда NAS отключен от локальной сети.
    QNAP TS-212 показал средний результат. Вентиляторы тихие, даже тише, чем используемые жесткие диски, но всё равно слышны.
    Ну а Synology DS212j со своим тихоходным 92 мм вентилятором однозначный победитель. После включения устройства диски раскручиваются не сразу, и первые несколько секунд устройство просто неразличимо.

Жаль, что никто из производителей не использует шумоизоляцию в корпусах NAS или хотя бы виброизоляцию жестких дисков.

Заключение

Если вы фанат компьютерного «железа» и вам нравится сам процесс работы с аппаратурой, то вряд ли вы просто купите NAS и лишите себя очередной порции удовольствия. Он не подойдет и в том случае, если вы хотите зарабатывать сборкой «почти того же самого, но дешевле».

Готовые хранилища будут идеальным выбором для простых людей, которые не будут возиться с ними как с тамагочи, а, наоборот, закинут в угол и забудут на несколько лет. Для них важны в первую очередь компактные размеры, низкий уровень шума и энергопотребления. Другой вариант – когда NAS это не цель, а средство решения более важных задач. У вас может просто не быть времени неделями искать подходящее решение и настраивать систему с нуля. Время – деньги. Может быть, выгоднее заплатить и сразу начать работать, а за сэкономленное время заработать еще больше? В бизнес-сегменте ситуация обычно именно такая.

Теперь непосредственно о героях тестирования.

Asus TS mini – интересное решение. Windows-платформа позволяет запускать любые привычные приложения. Удаленный доступ к компьютерам локальной сети, централизованное резервное копирование по принципу образов дисков, Drive Extender – отличные функции, готовые к работе из коробки.

Но она с трудом подходит для условий, в которых работают NAS’ы, слишком уж тяжеловесна. В роли веб-серверов вместе работают IIS и Apache, никому не нужный SearchIndexer потребляет 200 Мбайт памяти – аппаратные ресурсы используются крайне неэффективно. Была ситуация, когда после очередной установки обновлений сервер звякнул, как это бывает при появлении окна с ошибкой, и перестал отвечать на запросы извне. А монитора-то нет, чтобы посмотреть, в чем дело.

К сожалению, время показало, что WHS - мертворожденная платформа. И даже выход Home Server 2011, основанной на Windows Server 2008, не изменил ситуации. Об этом говорит и ничтожно малое количество устройств с этой ОС, и тот факт, что большинство WHS плагинов были заброшены авторами несколько лет назад. Кстати, в Home Server 2011 убрали Drive Extender - не иначе как эксперимент признали провалившимся.

Продукты QNAP и Synology резко отличаются от TS mini, а между собой похожи как братья. Оба работают стабильно, обладают минимальными габаритами и энергопотреблением, и при этом поддерживают громадное количество функций.

QNAP TS-212 заслуживает внимания за три USB порта с кнопкой быстрого копирования и удобный интерфейс-«проводник», который, на мой взгляд, гораздо нагляднее и проще в освоении, чем «рабочий стол» Synology. По остальным параметрам он хоть и не намного, но проиграл конкуренту.

Synology DS212j отличился тишайшим вентилятором, наличием шифрования, гибридного RAID-массива, глубокого спящего режима, очень удобным файловым менеджером и высокой производительностью, особенно в режиме iSCSI. Именно он получает награду: 