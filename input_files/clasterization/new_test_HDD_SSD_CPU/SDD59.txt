
Обзор SSD-накопителей для центров обработки данных Kingston DC500M и DC500R емкостью 480 ГБ
Оглавление

    Kingston DC500M 480 ГБ
    Kingston DC500R 480 ГБ
    Образцы для сравнения
    Тестирование
    Методика тестирования
    Производительность в приложениях
    Последовательные операции
    Случайный доступ
    Работа с большими файлами
    Рейтинги
    Итого

Методика тестирования накопителей образца 2018 года

Долгое время вопрос выбора технологии оперативного хранения данных не стоял в принципе — на рынке доминировали жесткие диски. И сейчас, и в ближайшей перспективе на них приходятся и будут приходиться основные объемы в емкостном исчислении, благо в плане удельной стоимости хранения информации прямых конкурентов для них все еще нет. Однако иногда достаточно и «непрямой» конкуренции — хотя бы потому, что большие массивы данных приходится не только хранить, но и обрабатывать. И обрабатывать быстро. Попытки же повышения производительности винчестеров вступают в прямой конфликт с необходимостью увеличения их емкости — причем особенности технологии таковы, что последняя снижается быстрее, чем увеличивается скорость. Но, поскольку рынок «жив» в основном за счет дешевизны (относительной, конечно) больших емкостей, идти на такое желающих давно нет. Скорее, даже, наблюдается обратный процесс — поставки «высокоскоростных» винчестеров постоянно уменьшаются, а разработка новых моделей и вовсе прекращена. В отличие от nearline — без каких-либо скоростных рекордов, зато уже до 20 ТБ в одном «стандартном» корпусе. Такие модели как нельзя лучше подходят для хранения больших объемов «холодных» данных и в корпоративном, и в домашнем сегментах (просто во втором требования к полной емкости «хранилок» обычно ниже).

Скорость работы же в настоящее время принято «требовать» от твердотельных накопителей. И это тоже верно для систем разного назначения — меняются только количественные характеристики и возможности их приобретения. Но, в общем, те же NVMe-накопители на базе флэш-памяти (а то и не флэш) уже давно мигрировали даже и в домашние компьютеры, не говоря уже о серверах — откуда и начинали. Именно они обеспечивают максимальную производительность — пусть и по высокой цене. Однако требуются и промежуточные варианты — для случаев, когда винчестеров уже мало, но требования к скорости все еще не слишком велики, чтобы платить за твердотельные накопители с PCIe-интерфейсом. Т. е. своего рода аналог nearline-винчестеров, но на базе флэш-памяти — для «теплых», но не «горячих» и «холодных» данных. Впрочем, в небольшой и/или недорогой системе могут они быть и лучшими из установленных.

Какими должны быть такие устройства — понять несложно даже «на пальцах». Во-первых, от них требуется высокая (по меркам SSD) емкость. Во-вторых, это сразу же определяет и форм-фактор, и интерфейс: типичные 2,5″ и SATA, что позволяет им непосредственно заменять жесткие диски в тех же корзинах. Почему не SAS? Расширенные возможности такового нужны не всем, но стоят достаточно дорого — как минимум, потребуются специальные контроллеры. Разработка которых не окупится: готовые платить покупатели мигрируют на NVMe, где им обеспечат и быстрый интерфейс, и двухпортовость и многое другое. А в «nearline SSD» нужны недорогие (относительно) массовые решения (тем более, что SAS-контроллеры поддерживают и SATA-накопители, но не наоборот) — вплоть до модификаций обычных «бытовых». В принципе, современные контроллеры для SSD необходимую функциональность поддерживают, так что их можно использовать в разных сегментах рынка. Например, Intel выпускает корпоративные модели на том же Silicon Motion SM2259, что и в «бытовых» SSD серии 545s — только вот емкость этих линеек достигает почти четырех терабайт, гарантийные условия совсем иные, да и внутри все модели немного отличаются от родственника для ПК.

Пример немного иного рода — семейство Nytro у Seagate, а также его модификация для NAS, с которой мы знакомились подробно. В данном случае «совсем бытового» аналога нет, хотя на базе контроллера Seagate ST22G4000AB можно было бы выпускать и такой — просто это экономически не оправдано. Поэтому розничные предложения компании представляют собой «типичные» устройства на основе продуктов Phison. С другой стороны, не будь у Seagate собственных контроллерных наработок (таковые достались при поглощении LSI — в свое время также «проглотившей» SandForce), с высокой вероятностью и в SSD для «взрослых» систем обработки данных стояли бы те же Phison. При правильном подходе это вполне возможно — что в очередной раз решили доказать в Kingston.
Kingston DC500M 480 ГБ
Kingston DC500R 480 ГБ

Почему в очередной? Потому, что в ассортименте Kingston уже были такие интересные решения, как DC400. Аппаратно они были практически идентичны потребительским моделям (как самой компании, так и других производителей) на базе контроллера Phison S10 и MLC-памяти (тогда еще практически безальтернативной), но немного отличались от них общей емкостью и возможностью гибко конфигурировать соотношение доступных и резервных блоков памяти. Увеличение резерва в частности позволяло повысить стабильность скорости операций случайной записи в «тяжелом режиме». Этому способствовали и специальные оптимизации прошивки — в частности, в ней была реализована и более «ленивая» сборка мусора, чем принято в потребительских семействах. В общем, большинство отличий относились к программным — аппаратно, повторимся, накопители были очень похожи на бытовые модели. На что компании некоторые пеняли — например, на отсутствие каких-либо конденсаторов и, соответственно, защиты от сбоев питания. Но в целом по совокупности характеристик устройства получились интересными — и популярными.

Правда, с точки зрения сегодняшнего дня, уже устаревшими. Поэтому и решено было выпустить DC500, где используется TLC-память и контроллер Phison S12. И то, и другое понятно — за прошедшие годы TLC в общем-то доказала свою универсальную природу, распространившись из бюджетного сегмента почти на весь рынок SSD. Но, чтобы получить на ее базе накопитель с высокой надежностью и производительностью, нужен подходящий контроллер. Многие производители экспериментировали и с тем же S10 — однако он не поддерживает исправление ошибок на базе LDPC-кодирования, а только более старые алгоритмы BCH ECC. Таким образом, связка из S10 и TLC жизнеспособна лишь в бюджетном сегменте. А вот Phison S12 — по сути, вообще новейший SATA-контроллер, ставший лебединой песней этого сегмента: в основном довольствующегося более старыми контроллерами. Многие его блоки унифицированы с топовыми E12/E16 (NVMe на базе PCIe 3.0/4.0 соответственно), естественно, он изначально ориентирован на использование 3D TLC и т. п. Применяется, впрочем, не слишком активно — поскольку главным, чего массовый потребитель ждет от SATA-устройств, является цена, обычно в таковых используются и более дешевые контроллеры, вплоть до «безбуферных» Silicon Motion SM2258ХТ или Phison S11. Но для озвученной в начале статьи цели — подходит отлично. А именно на этот сегмент рынка Kingston и выводит DC500.

При этом нельзя сказать, что модели данных двух линеек (почему их две — поговорим позже) являются типичными представителями SSD на базе Phison S12 — в отличие от времен DC400, здесь найдется немало аппаратных отличий. В частности, защита от потери питания (PLP) присутствует — для ее реализации используются танталовые конденсаторы. Кроме того, непривычно выглядит сама память. Большинство продуктов на базе контроллеров Phison использует 3D TLC NAND Toshiba — благо в таком виде SSD производятся как раз непосредственно Phison и отгружаются партнерам. Среди таковых, впрочем, Kingston находится в особом положении, нередко использует собственный дизайн плат и может экспериментировать с памятью. В частности, используя 64-слойную 3D NAND TLC производства IMFT — которая в ряде сценариев совместно с контроллерами Phison обеспечивает более высокую производительность. Таковая используется и в DC500, причем в младших представителях обеих линеек мы обнаружили кристаллы по 256 Гбит. Что немаловажно — вообще говоря в потребительских моделях емкостью ≈500 ГБ многие производители для экономии давно уже перешли на более емкие, но и более медленные кристаллы. Особенно это касается записи данных — где в итоге максимальная скорость интерфейса достигается лишь в пределах SLC-кэша даже при «простых» нагрузках, а по всему объему этим могут похвастаться лишь накопители от терабайта и далее. DC500 так умеют и в минимальной конфигурации.

Что же касается двух подлинеек, то с ними все просто. Формально DC500R предназначены для работы с преобладанием операций чтения, с чем как нельзя лучше справляются любые твердотельные накопители. Более дорогие модели семейства DC500M ориентированы на смешанные нагрузки — где, в частности, может встречаться и большой объем записи данных. Соответственно, в устоявшемся режиме младший DC500R обеспечивает производительность операций записи 4K со случайным доступом на уровне 12 тысяч IOPS, а такой же DC500M обеспечит в тех же условиях не менее 58 тысяч IOPS. Что же касается случайного чтения, то тут все ровно для всех моделей обеих линеек — 98 тысяч IOPS. Обращаем внимания — как и положено в данном сегменте, декларируются именно минимальные гарантированные показатели, а не пиковые «up to». Т. е. то, на что точно можно рассчитывать. Понятно, что для вытеснения жестких дисков с их типичными сотнями, а не тысячами и десятками тысяч IOPS подходит и то, и другое, а дальше уже нужно просто определиться — какой конкретно уровень нужен в системе. Ну или просто обращать внимание на ограничения гарантии, которые тоже разные. Для DC500R накопитель «разрешено» перезаписывать каждый день на половину (0,5DWPD или 438TBW на каждые 480 ГБ емкости за пять лет), а DC500M — 1,3 раза (1,3DWPD или 1139TBW на каждые 480 ГБ емкости за пять лет). В принципе, значения не рекордные (некоторые накопители этого сегмента «тянут» и на 2-3 DWPD), однако в реальности всегда приходится отдавать себе отчет, что рекордная износостойкость как правило дает и рекордную цену. Kingston DC500 же — «рабочие лошадки», т. е. речь в любом случае идет о компромиссе между емкостью, стоимостью, скоростью и гарантийным ресурсом. Последний, в любом случае, существенно выше, чем это принято в потребительском сегменте. Максимальная производительность, как уже сказано, ныне в основном обеспечивается силами NVMe-накопителей — от SATA-устройств требуется стабильность скоростных показателей на более высоком, чем могут обеспечить жесткие диски, уровне. А емкость должна быть с ними сопоставима — поэтому в семействе DC500 Kingston предлагает модификации от 480 ГБ до 3,92 ТБ. Для сравнения — самые быстрые винчестеры типа, например, Seagate Exos 15E900 остановились в развитии на 300-900 ГБ, а пожертвовав скоростью вращения (в Exos 10E300) можно получить до 2,4 ТБ. В общем, выполнено и перевыполнено :) Кроме того, вспоминая DC400 эту формулировку можно применить и к нему. В самом деле — как минимум, увеличилась максимальная емкость в линейке (в два раза) и появилась аппаратная защита от сбоев питания. Устоявшаяся производительность при больших нагрузках ранее не опускалась ниже 11/35 тысяч IOPS на блоках по 4К (480/400 ГБ соответственно — напомним про гибкое конфигурирование) — теперь же речь идет об 12 тысячах IOPS для DC500R и 58 тысячах DC500M аналогичной емкости (которой теперь и вовсе не приходится «жертвовать»; хотя на самом деле не все так просто). Причем уже DC500R, несмотря на переход на TLC, имеет гарантийный ресурс в 438 ТБ — для DC400 максимумом было 422 ТБ даже при ограничении емкости. Цены же сравнивать сложно — понятно, что за прошедшие годы и общий их уровень упал.

Есть ли между подлинейками DC500 аппаратные различия? Казалось бы, нет — одинаковая емкость, одинаковый контроллер, одинаковая память, одинаковая версия прошивки... Однако, диагностические утилиты показывают, что не все так просто как раз с памятью. В DC500R в точном соответствии с житейской логикой установлено 16 кристаллов памяти по 256 Гбит с двукратным чередованием (благо контроллер восьмиканальный), что и дает нам физический объем в 512 ГБ — превращающихся в 480 ГБ из-за необходимости чуть «расширить резерв». DC500M не так-то прост — в нем 20 аналогичных кристаллов, т. е. «сырой» объем равен 640 ГБ, а «лишние» 128 ГБ добавлены к резервным ячейкам. По сути — тот же подход, что и в DC400, так что не удивительна и разница в заявленных характеристиках. Правда, пришлось ограничиться пятью каналами контроллера, но с четырехкратным чередованием. И немного отличается емкость DRAM-буфера: 512 МБ либо 1 ГБ DDR4-1600 (где сколько — несложно угадать), что, в принципе, должно «облегчить» работу контроллера с увеличившимся массивом флэш-памяти. Но принципиальным отличием, конечно, не является — в отличие от аппаратного резерва аж в 25% всей емкости ячеек. Подход, повторимся, не нов, встречался не только в продукции Kingston (в некоторых моделях Intel резервная емкость достигала и 33% полной), но работает. Имея и очевидный недостаток — платить, все-таки, приходится за все 640 ГБ, которые по определению дороже 512.

При этом, в отличие от многих собратьев по классу, для обеих версий DC500 нет каких-либо ограничений по каналам продаж — они имеют розничную упаковку и свободно поступают в обычные торговые сети. Тоже, в общем-то, немаловажно. В первую очередь — для владельцев «небольших» дата-центров или просто одиночных серверов. Или, даже, частных пользователей: в конце-концов и с обычными для персонального компьютера / рабочей станции нагрузками эти модели должны справляться хорошо и без каких-либо нюансов, поскольку контроллеры имеют универсальное назначение. В нашем же случае это вообще первые решения на Phison S12, оказавшиеся в лаборатории. Поэтому интерес представляет и их тестирование на обычных персональных нагрузках — а также сравнение друг с другом (и с возможными конкурентами) и в таких условиях.
Образцы для сравнения

В качестве таковых в первую очередь мы решили взять пару моделей Samsung — 860 Evo и 860 Pro, а также Intel 545s. Причины? Наличие у всех них аналогов (на тех же контроллерах и такой же памяти) и в корпоративном сегменте и хорошая «изученность» со всех сторон. Собственно, все и сами по себе нередко приобретаются как раз «для нецелевого использования», что особенно верно для 860 Pro — для обычной персоналки он несколько дороговат и избыточен по характеристикам. Но полезен как оценка сверху. Кроме того, мы добавили и арию из другой оперы в виде Silicon Power Velox V85 — который нам интересен не сам по себе, а как типичная реализация платформы Phison S10 + «планарная» MLC-память Toshiba, т. е. использовавшейся и в Kingston DC400.
Тестирование
Методика тестирования

Методика подробно описана в отдельной статье. Там можно познакомиться с используемым аппаратным и программным обеспечением.
Производительность в приложениях

Накопители на контроллерах Samsung MJX традиционно являются лидерами в SATA-сегменте, хотя разброс результатов здесь вообще невелик — что в первую очередь полезно для бюджетных (и самых бюджетных) SSD.

Причем даже если убрать влияние других компонентов системы и попробовать оценивать «чистую» производительность накопителей — принципиально ничего не меняется. Практически значимым результатом можно считать, разве что один — на базе Phison S12 можно выпускать SSD с производительностью выше среднего уровня. Понятно, что в первую очередь в Kingston при разработке DC500 заботились совсем о других нагрузках — но побочный эффект оказался таким.

Предыдущая версия тестового пакета демонстрирует сходные результаты, хотя и конкретно к нашим героям несколько менее благосклонна. Обратить внимание стоит лишь на то, что и в таких «нецелевых» сценариях (и при преобладании операций чтения) DC500M оказывается хоть немного, но быстрее, чем DC500R. Но с учетом разных аппаратных конфигураций это ожидаемо.
Последовательные операции

SATA600 уже маловато для каких-либо рекордов по чтению, так что просто в очередной раз наблюдаем трогательное единодушие :)

Что же касается записи данных, то даже в таком простом сценарии (где еще и прекрасно работает SLC-кэширование) DC500M выходит в однозначные лидеры — ему даже накопители с MLC-памятью не конкуренты. Но, опять же, слишком низкую планку задает SATA600, чтобы это могло стать решающим. Пиковые скорости уже ищут совсем в других сегментах.
Случайный доступ

«Длинные очереди» при чтении — во многом работа контроллера, причем в современных условиях SATA/AHCI его потенциальные возможности тоже уже ограничивают. Соответственно, тут главное «не навредить» — с чем Phison S12 вполне справляется.

Запись процесс несколько «более творческий», но тоже ограниченный — и тоже в первую очередь зависящий от контроллера. Интерес тут может вызвать разве что очень высокая производительность на операциях «без очереди» — в полтора раза выше типичного уровня.

Некоторое изменения характера нагрузки и алгоритмов работы показывает и другие абсолютные результаты. Но не принципиально другие. В общем-то данный набор тестов нужен нам сегодня с одной целью — продемонстрировать, что пиковые «иопсы» соответствуют «бытовым» моделям. Несмотря на разные заявленные характеристики — просто в них похожие на первый взгляд показатели приведены для абсолютно разных условий. Для потребительского сегмента декларируются как раз пиковые значения на пустом накопителе — никаких гарантий насчет непрерывной записи на забитый данными SSD там найти не получится. Для корпоративного сегмента практически важны как раз вторые — они и указываются в спецификации. А в равных условиях модели формально разного назначения и с разными ТТХ попросту будут равны — с точностью до аппаратной платформы.
Работа с большими файлами

Любопытно, что «традиционные» варианты с наращиванием числа каналов оказались менее эффективны, чем увеличение кратности чередования в режиме чтения одиночного файла. С другой стороны, стоит лишь немного увеличить нагрузку — и все «упирается» в SATA600.

При емкости в пол-терабайта само по себе использование кристаллов по 256 Гбит и любого современного контроллера и скорость записи «упирает» в ограничения интерфейса. DC500M и вовсе оказывается лидером — но слишком уж вообще мала разница между испытуемыми.

Формально DC500R и DC500M имеют одинаковую емкость, фактически — разную, а именно от последней зависит, например, размер SLC-кэша и «запас» свободных ячеек. Интересным оказывается то, что DC500M конкурировать по скорости в итоге особо не с кем — кроме, разве что, Samsung 860 Pro, использующего MLC-память. А дальше — чистая арифметика: как MLC вместо TLC, так и увеличение резерва приводят к росту стоимости... но по мере увеличения емкости, первое будет все больше и больше обгонять второе. Т. е. подход с увеличением резерва является экономически оправданный. Да и на практике его реализовать не сложно — вне зависимости от конъюнктуры рынка.
Рейтинги

В принципе, сама по себе наша тестовая методика (и входящие в нее программы) ориентирована на потребительские накопители — и, разумеется, в полной мере не может отразить свойственные другим сегментам рынка хитрости. Но такая цель и не ставилась. В первую очередь интересен был вопрос — а как с подобными нагрузками справляются подобные DC500 «гибридные» решения? В очередной раз выяснилось, что хорошо. Понятно, что стоят они дороже, чем бюджетные модели — но и работают лучше среднего уровня. А в условиях, когда из SATA-сегмента как раз «хорошие» модели вымываются в пользу «дешевых» (что устраивает далеко не всех пользователей) это может заинтересовать и индивидуальных потребителей, а не только основную целевую аудиторию.
Итого

Что касается персональных нагрузок, то оптимальным для них стоит считать только Kingston DC500R. Но это не удивительно — по сути своей он не слишком отличается от «потребительских моделей». Это просто хороший SSD на современном (и не ультрабюджетном) контроллере, быстрой флэш-памяти и с хорошими гарантийными условиями — плюс приятные мелочи, типа расширенных атрибутов SMART и PLP. При использовании по целевому назначению это, впрочем, уже не «мелочи» — хотя и там без них зачастую обходятся. Но при наличии такой возможности можно себя так не ограничивать. Оптимизация под преобладание чтения данных — по сути условность: просто как раз в таких случаях всегда хороши практически любые SSD; и особых сложностей не возникает.

Kingston DC500M — устройство другого рода, хотя и не являющееся каким-то революционным новшеством. По сути метод увеличения количества резервных блоков на этом сегменте рынка используется давно и не только Kingston. И всегда с одинаковым результатом — имея такой запас, накопители демонстрируют более высокую стабильность скоростных показателей при тяжелых нагрузках, чем без него. Бесплатно он не дается — что минус. Но это дешевле, чем переводить весь объем на более дорогую память (особенно, когда таковой требуется несколько терабайт) — очевидный плюс. Почему реализацию данного подхода мы и наблюдаем в очередной раз.
