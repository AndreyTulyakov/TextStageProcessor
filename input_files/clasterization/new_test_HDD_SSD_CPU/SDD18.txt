
SSD-накопитель Intel Optane Memory емкостью 32 ГБ
Методика тестирования
накопителей образца 2016 года

Продвижение Optane на рынок компания Intel начала с корпоративного сегмента (что понятно) и... кэширующих накопителей. Потребительские же модели твердотельных накопителей, использующих память нового типа, появятся не ранее осени. Такой подход вызвал некоторое недоумение у тех, кого принято называть компьютерными энтузиастами: во-первых, эта группа слишком уж прохладно относится к кэшированию (в конце концов, свежа еще память о «тихо сдувшейся» Smart Response), во-вторых, они спокойно воспринимают высокую цену устройств. Собственно, на то они и энтузиасты, что готовы платить — в отличие от нормального пользователя, старающегося сэкономить. Из-за этого, кстати, обычные твердотельные накопители до сих пор встречаются вовсе не в каждом продаваемом новом компьютере (не говоря уже о старых), так что идея с кэшированием право на жизнь имеет — не говоря уже о том, что Optane Memory и Smart Response имеют разную логику работы, так что по одной не стоит делать вывод о другой. Впрочем, это тема отдельная и нуждающаяся в подробном изучении.

Нам же сегодня было интересно немного другое: фактически накопители Optane Memory можно использовать и как «обычный SSD». Никакой специальной поддержки со стороны системы в этом случае не требуется — где работают хоть какие-то NVMe-устройства, туда можно установить и Optane Memory. Не для кэширования, повторимся, а просто как маленький, но быстрый твердотельный накопитель. Он слишком уж маленький для сегодняшнего практического применения, но для тестов подойдет. Понятно, что полного ответа на вопрос, чего ждать от потребительских SSD на Optane, мы таким образом не получим — хотя бы потому, что там будут другие емкости и контроллеры. Но оценить сильные и слабые стороны технологии вполне возможно.
Intel Optane Memory MEMPEK1W032GA 32 ГБ

Как видим, сам накопитель можно легко спутать с любым другим SSD в формате M.2: типичная плата 2280 с парой чипов памяти и контроллером. Отсутствует DRAM-буфер — но его нет и на некоторых бюджетных SSD. Там это, впрочем, мешает, а здесь не должно, поскольку сама новая память имеет намного более низкие задержки.

Кстати, отметим, что для этого накопителя нам не удалось включить кэширование записи средствами операционной системы, причем обругала она нас за такую попытку ранее невиданными словами: дескать, данным устройством данная функция не поддерживается. Пока непонятно, является ли это общим ограничением для всех накопителей на Optane Memory или только для кэширующей линейки (использование которой в качестве «обособленного SSD» и не предполагается). Но по понятным причинам на результатах тестов высокого уровня это ограничение неминуемо сказывается: современные версии Windows кэшируют запись весьма эффективно, в данном же случае данные всегда будут записываться сразу в энергонезависимую память. В чем, впрочем, есть и свои плюсы: меньше вероятность что-то потерять при сбое питания, например.

Как таковой контроллер в этих моделях уникальный и более нигде, судя по всему, не использующийся. В принципе, он разработан для узкой сферы применения, так что в потребительских моделях наверняка будет ставиться что-то другое (в серверных — точно другое). Соответственно, несмотря на использование дорогой на данный момент памяти, контроллер одноканальный, да и с хост-системой соединяется интерфейсом PCIe 3.0 x2. Судя по всему, использованию «по назначению» это все не мешает, но на итоговой производительности не может не сказываться — в частности, Intel декларирует для последовательной (даже последовательной!) записи лишь 290 МБ/с. Учитывая наличие всего пары кристаллов 20-нанометровой памяти 3D XPoint, цифра довольно высокая — но на фоне «традиционных» SSD, конечно, не впечатляет. Зато TBW в 182,5 ТБ для обеих выпускаемых на данный момент модификаций (16 и 32 ГБ), напротив, прямо намекает на высокую прогнозируемую «выносливость» новой памяти. Действительно, производители накопителей на базе NAND-флэша о таких объемах записи говорят разве что применительно к устройствам на базе MLC-памяти емкостью более 100 ГБ. А новую память, по сути, можно спокойно перезаписывать по несколько раз в день в режиме 24/7. Причем ее ресурс расходуется в намного более щадящем режиме (и это свою роль тоже играет): нет необходимости стирать целый блок ради того, чтобы изменить один бит. Грубо говоря, усиление записи отсутствует, «хитрые» алгоритмы выравнивания нагрузки становятся простыми, сборка мусора тоже не нужна — одни удовольствия. Но это все в теории — практики эксплуатации пока недостаточно, чтобы что-то утверждать гарантированно. Поэтому пока ограничимся теорией.

В общем, подытоживая краткое знакомство, отметим, что на роль «обычного накопителя» Optane Memory не претендует. Даже если бы компания выпустила модификации большей емкости, специфический контроллер, жестко «заточенный» под конкретное применение, все равно породил бы продукт дорогой и странный. Однако технически, если использовать современную систему с чипсетом 200-й серии и новым процессором Core, то просто как отдельный накопитель Optane Memory можно применять где угодно, где вообще можно использовать NVMe-устройство. В частности, в нашу тестовую систему он «встал как влитой», что позволило провести «стандартные» тесты и просто оценить, как оно могло бы работать. Естественно, с поправкой на перекосы в характеристиках.
Конкуренты

Для сравнения мы взяли результаты тройки накопителей, с которой и начинали тесты NVMe-устройств по текущей версии методики. Kingston HyperX Predator 480 ГБ — и вовсе представитель редкого и исчезающего класса «обычных» AHCI PCIe SSD, но он имеет в точности такую же пропускную способность интерфейса, как и наш сегодняшний герой. Intel 750 400 ГБ тоже модель нетипичная для потребительского рынка, но с ним тоже любопытно сравнить производительность в разных сценариях. А Samsung 950 Pro 512 ГБ до сих пор можно считать одним из самых быстрых устройств на рынке — обновленный 960 Pro еще интереснее, но к нам он пока не попадал.
Методика тестирования

Методика подробно описана в отдельной статье. Там можно познакомиться с используемым аппаратным и программным обеспечением.
Производительность в приложениях

Собственно, это одна из основных причин, почему Intel не торопится с выпуском потребительских накопителей на новом типе памяти: первые ориентированные на массовый рынок SSD компании (типа X25-M) по удельной стоимости хранения информации были еще хуже, но вызывали однозначный «вау-эффект» и при нагрузках, характерных для обычной работы на персональном компьютере. Кстати, те модели тоже имели невысокие последовательные скорости, но это им никак не мешало, поскольку «механика» с присущими ей задержками к тому моменту уже гарантированно являлась «узким местом» для дисковых операций. А вот любые твердотельные накопители (даже не самые быстрые) расшивают это бутылочное горлышко: «переварить» столько никакие прикладные программы просто не могут.

Потенциальные возможности устройств на Optane Memory выше, но в текущем исполнении особого пиетета не вызывают.

Да и в предыдущей версии тестового пакета четверка накопителей демонстрирует существенно разные результаты только в RAW-режиме, который, напомним, представляет собой чистую синтетику: меряет скорость выполнения дисковых трасс без учета реальных задержек со стороны других аппаратных и программных компонентов системы, в том числе и самих прикладных программ.
Последовательные операции

С чтением данных все просто: и для обычного NAND-флэша, и для 3D XPoint сдерживающим фактором является уже пропускная способность интерфейса накопителя. Это хорошо заметно на фоне Kingston HyperX Predator: напомним, что PCIe 2.0 x4 последнего как раз эквивалентны PCIe 3.0 x2 у накопителя на Optane Memory.

А вот производительность операций записи определяется самими чипами памяти либо их связкой с контроллером. В данном случае сколько Intel обещала, примерно столько и получили.
Случайный доступ

Если хорошо постараться, то на «глубоких» очередях (то есть при интенсивной дисковой нагрузке) NVMe-накопители на базе NAND-флэша высокой емкости могут продемонстрировать очень высокую скорость работы, потому что такие запросы хорошо распараллеливаются, да и сам по себе протокол «заточен» именно под такие нагрузки. «Обычные» SSD намного медленнее, поскольку у них протокол AHCI и очереди короче. Но при единичной очереди на первое место выходят собственные задержки носителя — и вот тут уже что-то «исправить» на более высоком уровне нельзя. Смена типа памяти на Optane Memory, имеющий низкие задержки, естественно, резко повышает производительность, да и на длинных очередях позволяет Optane Memory неплохо держаться, несмотря на низкий параллелизм текущих реализаций.

При записи же данных разбросать работу по разным каналам можно практически всегда — если эти каналы, конечно, есть. Если их нет или мало, но память быстрая, то результат будет хорошим, хотя и не выдающимся — на уровне наиболее быстрых SSD на NAND-флэше. А «хороший» контроллер да на большом объеме может позволить здесь победить.

Однако для обычного персонального компьютера или даже рабочей станции характерно превалирование операций чтения, причем при использовании любых твердотельных накопителей — операций чтения с единичной глубиной очереди команд (более длинная просто не успевает выстроиться, поскольку SSD с такими операциями справляются быстро). Блоки, правда, не обязательно будут равны 4К — бо́льшие значения встречаются даже чаще. Но во всех этих случаях новая память смотрится очень хорошо, низкие задержки позволяют без каких-либо сложных алгоритмов всегда обеспечивать быстрое выполнение подобных запросов. На самом деле, даже слишком быстрое: поскольку пока массовому ПО вполне достаточно возможностей любых SSD, то неважно, кто из них потенциально быстрее, а кто медленнее — производительность ограничивают другие факторы.
Рейтинги

В итоге получаем, что чтение данных — сильная сторона Optane Memory. Иногда выигрыш у NAND-флэша достигает порядка, иногда — скромнее, но он есть почти везде. Будь интерфейс конкретного накопителя более быстрым — была бы более высокой и скорость последовательных операций. Запись же в текущей реализации невыдающаяся, однако и тестировали мы накопители в неравных условиях: есть подозрение, что пара кристаллов NAND-флэша на одном канале контроллера и на такое была бы неспособна.

Но даже в текущей реализации со всеми ее ограничениями при традиционном подходе к общему рейтингу Optane Memory, естественно, оказывается одним из самых быстрых SSD — «реактивное» чтение вытягивает.
Итого

Глядя на результаты, становится понятно, почему Intel при продвижении нового типа памяти пока игнорирует сегмент потребительских твердотельных накопителей. Действительно, а что новые модели могли бы дать пользователям компьютеров? Производительности «традиционных» SSD пока хватает с запасом, так что получится еще одно устройство, которого тоже хватает с запасом, только с бо́льшим. Оно будет способно выдерживать бо́льшие нагрузки, да, но будет и существенно более дорогим. Вот в серверах и НРС за надежность платить готовы, да и производительность (а главное — ее стабильность) окажется не лишней. А все еще большой сегмент систем, не использующих твердотельные накопители, можно «подстегнуть» с помощью Optane Memory, освоив новые методы кэширования. Тем более, что текущие накопители Optane Memory благодаря небольшой емкости и стоят недорого. Правда, открытым остается вопрос, не лучше ли потратить эти деньги на «обычный» SSD большей емкости, размещая часть программ и данных на нем. Но это как раз нужно будет тестировать отдельно, подробно и в разных сценариях. А на роль конкурента NAND-флэша в потребительских твердотельных накопителях новая память пока претендовать не сможет.

Дело в том, что высокие цены на старте производства неизбежны, да и техпроцесс сейчас используется достаточно грубый. NAND-флэш развивался долго, что за последнее десятилетие позволило ему подешеветь на порядок, а то и на два, но процесс был небезболезненным. Фактически каждый шаг приводил к снижению не только цены, но и ресурса, и производительности (в расчете на кристалл). Обычные планарные микросхемы уже зашли в тупик, решением проблемы казались трехмерные чипы, но с ними пока не все гладко. Итогом же не так давно оказался рост цен: спрос вырос быстрее, чем возможности производства. Optane же явно нацелен на будущее, так что масштабироваться и улучшаться сможет быстрее. Со временем эти технологии где-то встретятся, в том числе и по цене — не обязательно равной, достаточно просто сравнимой. Но как к тому моменту будут выглядеть другие характеристики обоих типов памяти — покажет только время. Одно очевидно: скучно не будет :)
