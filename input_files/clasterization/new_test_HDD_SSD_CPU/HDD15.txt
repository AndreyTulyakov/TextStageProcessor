Тестирование жестких дисков WD серий 
Se и Red в составе сервера начального уровня
Sorry, temp error.

В прошлом материале для тестирования жестких дисков WD Se мы использовали достаточно производительный для своего класса сетевой накопитель, однако нам не удалось найти существенных отличий в производительности по сравнению с WD Red. Основными причинами были ограничение скорости гигабитного сетевого контроллера и, возможно, сама платформа NAS. Так что мы решили собрать еще один, более производительный, вариант стенда для проверки этих винчестеров.
Здесь стоит сделать важное замечание. В большинстве случаев, исследование производительности и настройка параметров систем хранения данных должны быть привязаны к конкретной решаемой ими задаче. Так что одного универсального инструмента здесь нет и быть не может. На рынке существует много хороших и удобных программ, большинство из которых используют задаваемые пользователем шаблоны или сценарии. Последние, с одной стороны, предоставляют полную в свободу в выборе параметров тестов, но, с другой стороны, вопрос об их адекватности конкретным задачам пользователя остается открытым. Второй проблемой может быть выбор аппаратной конфигурации систем. Как и для задач, в этой области не существует «стандартного сервера». Во многих случаях, системы подбираются индивидуально под требования задач и специально проектируются для исключения «узких» мест и достижения требуемых показателей производительности. В продолжение обсуждения конфигураций упомянем еще один момент. Путь, который проходят данные при чтении или записи на диски, имеет множество шагов и на каждом из них могут возникать несогласования или накладные расходы на операции. В идеальном случае многие параметры можно и нужно изменять для повышения эффективности, отталкиваясь от задач и нагрузки.
В этих условиях, когда можно настраивать и систему и тест, единственным вариантом для нас, который можно реализовать за разумное время, будет просто выбрать конфигурацию и тесты исходя из общих представлений о данной области и наличии доступного оборудования и программ. Тем более, что в данном материале мы хотим сравнить только винчестеры. Однако к оценке результатов нужно подходить внимательно и не считать, что везде и всегда рассматриваемые модели будут отличаться именно так.
Тестирование
В данном материале использовался сервер следующей конфигурации: материнская плата Asus P8H67-M-EVO, процессор Intel Core i5-2500K, оперативная память 8 ГБ (для уменьшения влияния кэширования ее объем ограничивался 2 ГБ ключом загрузки ОС), отдельный системный винчестер, двухпортовая гигабитная сетевая карта Intel I350-T2, операционная система Windows Server 2012 R2. Тестируемые винчестеры в количестве четырех штук каждой модели по очереди подключались к портам SATA 3 Гбит/с материнской платы. Конфигурация дисковой системы использовала технологию Intel Rapid Storage Technology и соответствующее программное обеспечение. В клиенте под управлением 64-битной Windows 8 работала материнская плата на базе чипсета Intel H77 с процессором Intel Pentium G620, 2 ГБ оперативной памяти и такой же, как и в сервере, моделью сетевого адаптера.
Использование связки данных операционных систем позволяет задействовать технологию SMB Multichannel, которая может увеличить скорость сетевого доступа к файлам через любой сетевой коммутатор при наличии двух и более сетевых адаптеров в компьютерах. Так что далеко не все возможности использованного нами D-Link DGS-3200-10 потребовались в этом тестировании, мы задействовали только Jumbo Frames.
Среди нескольких доступных вариантов организации дисковых массивов был выбран Intel RST. Быстрая проверка программных реализаций операционной системы показала, что отличия в производительности не являются существенными для нашего теста. Все настройки при создании массивов оставлялись по умолчанию. При этом размер блока для RAID0 составил 16 КБ, а для RAID5 — 128 КБ. Изменение данных опций имеет смысл только при понимании требований и особенностей используемого программного обеспечения и генерируемой им нагрузки. В данном материале мы не ставили целью настройку параметров дисковой системы для максимальной скорости. Скорее даже наоборот — будет интересно посмотреть, что пользователь потеряет, если не будет обращать на это внимание. Кроме массивов, тестировались и одиночные винчестеры.
Первая группа тестов проводилась на самом сервере для определения скорости работы локального хранилища. В качестве синтетического теста был выбран пакет Iometer с аналогичными используемыми нами в тестировании накопителей шаблонами случайного и последовательного чтения и записи. Отметим, что для случайных операций размер блока был изменен с 8 КБ на 4 КБ, так что напрямую сравнивать полученные результаты с другими статьями некорректно. Посмотрим сначала на последовательные операции.
Производительность WD Se и WD Red

Производительность WD Se и WD Red
Одиночные винчестеры идут очень близко, показывая максимальную скорость с поверхности на уровне 150 МБ/с. Показатели массива с чередованием существенно зависят от размера блока. При этом WD Se опережает соперника во всех точках. Чтение с массива RAID5 на базе новинки проходит на скорости около 470 МБ/с при размере блока 2 КБ и более, тогда как WD Red позволяет получить только 420 МБ/с. При записи на массив с четностью мы видим описанный выше эффект связи размеров блока данных из программы и блока массива. Если первый меньше второго, то накладные расходы на операции записи очень велики, что приводит к падению скорости почти в десять раз. Если же программа оперирует большими блоками, то обе конфигурации способны показать более 400 МБ/с, при этом WD Se здесь снова быстрее соперника.
Производительность WD Se и WD Red

Производительность WD Se и WD Red
На случайных операциях новая модель винчестера существенно производительнее. Во всех сценариях видно ее превосходство, которое составляет 30-55%. Основной характеристикой, обеспечившей такое отличие, является меньшее время поиска.
Для дальнейшей оценки скорости сетевого доступа нам будет полезны показатели локального доступа к файловой системе. Для их получения использовался тест Intel NASPT с используемыми нами последние несколько лет шаблонами с файлами большого объема, а раздел форматировался в файловую систему NTFS.
Производительность WD Se и WD Red

Производительность WD Se и WD Red

Производительность WD Se и WD Red
Все проверенные режимы показывают превосходство новой модели, вполне ожидаемое после первой группы тестов. Отметим, что с чтением в целом лучше справляется массив RAID5, обеспечивая почти 450 МБ/с для WD Se в многопоточном режиме. На записи у него мы встретились с описанной выше ситуацией с неоптимальным выбором размеров блоков, что привело к существенному падению скорости. Тогда как использованием массива с чередованием позволяет получить около 500 МБ/с в многопоточной записи.
Резюмируя первую часть тестов мы видим, что, несмотря на относительно старую и недорогую платформу, пользователь может получить достаточно неплохие результаты скорости дисковых массивов. Интересно, что массивы SSD в операциях записи недалеко ушли от нашего варианта из традиционных винчестеров. А вот на чтении они на современном чипсете способны и на большее. В некоторых тестах можно получить показатели на уровне 1500 МБ/с для массивов с чередованием.
Аналогичный тест, проводимый через сетевое соединение заметно повлияет в основном на те шаблоны, в которых скорость локального доступа быстрее сети. В данном тестировании мы использовали технологию SMB Multichannel и проводили все тесты в двух конфигурациях — с одним и двумя гигабитными соединениями.
Производительность WD Se и WD Red
Конечно, маловероятно, что в данном сегменте будет использоваться вариант работы с единственным винчестером, но полученные данные можно использовать для ориентира. Мы видим, что WD Se в большинстве режимов опережает WD Red на 10-60%. Единственный неожиданный проигрыш — в шаблоне чтения одного большого файла при двух линках. Если говорить об эффективности SMB Multichannel в данной конфигурации, то в целом разница небольшая. Только у WD Red на однопоточном чтении увеличение составило почти 50%. Так что для одного винчестера практически нет смысла в увеличении пропускной способности сетевого соединения выше стандартного гигабитного линка.
Производительность WD Se и WD Red
Благодаря более высокой скорости линейного чтения и меньшему времени доступа, WD Se в этом тесте снова оказывается быстрее. Однако если вы работаете с единственным гигабитным подключением, то на последовательных операциях разница будет незаметна, поскольку именно сеть будет ограничивать максимальную скорость. Использование двух гигабитных портов позволяет поднять производительность этой конфигурации на последовательных операциях на 30-90% (у WD Red рост скромнее — 20-40%). Случайные операции относительно небыстрые и для них достаточно одного соединения. Интересно отметить, что для записи одного большого файла в данном случае нет никакой зависимости от скорости сетевого подключения. Возможно, что это является особенностью реализации технологии SMB Multichannel в Windows 8.
Производительность WD Se и WD Red
При анализе работы в режиме RAID5 не стоит уделять много внимания сценариям записи, поскольку для них тестовая конфигурация явно настроена не оптимально. В целом результаты аналогичны массиву с чередованием — WS Se быстрее, использование двух сетевых интерфейсов позволяет существенно увеличить производительность на потоковых операциях, для WD Red «двойное» подключение приносит меньше выгоды.
Заключение
В прошлом тестировании с сетевым накопителем среднего уровня нам удалось получить скорость дисковых массивов на уровне 110 МБ/с. Эта цифра показывает не возможности винчестеров или процессора NAS, а ограничение гигабитного сетевого подключения. Для сегментов SOHO и SMB в большинстве случаев этого будет достаточно.
Использование дисковых массивов на рассмотренных моделях жестких дисков в сервере может обеспечить до 500 МБ/с при локальном доступе к данным. В случае предоставления данных массивов для сетевого доступа, использование одного гигабитного соединения не позволит полностью раскрыть возможности сервера. Реализация технологии SMB Multichannel в последних поколениях операционных систем Microsoft позволяет заметно увеличить скорость даже в случае одного клиента, однако ее эффективность зависит от конкретных конфигураций и сценариев использования.
Если говорить о сравнении WD Se и WD Red, то первые в подавляющем числе наших тестов являются более быстрыми. Впрочем, это было ясно и до проведения исследования по их формальным техническим характеристикам. Особенно отметим большую отзывчивость на использование в массивах и с двумя сетевыми подключениями. Так что если вы планируете реализовать недорогое быстрое решение большой емкости для хранения данных, стоит принять во внимание эти модели жестких дисков.
Последний вывод, который можно сделать из проведенного тестирования — реальная производительность системы хранения данных зависит от множества параметров. Некоторые из них являются аппаратными и могут быть примерно оценены по техническим характеристикам. Но не меньшее влияние оказывает и настройка программных компонент. Понимание особенностей используемых приложений и специфики стоящих задач является ключевым моментом для нахождения оптимального решения. Так что не всегда имеет смысл бездумно наращивать аппаратные ресурсы, увеличивая бюджет, а лучше внимательнее отнестись к возможностям тюнинга конфигурации, что может быть эффективнее и дешевле.
Для уточнения стоимости, температурных показателей и энергопотребления рассмотренных винчестеров можно обратиться к первой части статьи.