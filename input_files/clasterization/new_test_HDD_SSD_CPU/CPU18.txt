Обзор процессора AMD Athlon X4 845: десктопный Carrizo
Гибридные процессоры семейства Kaveri остаются основным предложением компании AMD для настольных персональных компьютеров на протяжении вот уже более двух лет. AMD бросила основные силы на разработку перспективной микроархитектуры Zen, а потому старается по возможности сократить свои издержки, связанные с подготовкой каких бы то ни было новых продуктов с различными воплощениями дизайна Bulldozer. Вот и произошедшее этой весной плановое обновление модельного ряда десктопных процессоров в исполнении Socket FM2+ не принесло никаких принципиальных перемен. Фактически AMD лишь немного нарастила тактовые частоты хорошо знакомых нам APU, базирующихся на процессорной микроархитектуре Steamroller и располагающих графическими ядрами семейства GCN 1.2. А это значит, что все анонсированные в течение февраля  – марта модели гибридных процессоров компании AMD для настольных систем – это снова хорошо знакомые нам Kaveri (или, если угодно, Godavari).
Конечно, такое замедление прогресса вряд ли может служить поводом для гордости. Особенно на фоне того, что Steamroller – далеко не самая свежая микроархитектура в арсенале AMD. Дело в том, что мобильные системы в середине прошлого года всё же удостоились внимания инженеров: для них было предложено нечто новенькое – процессоры Carrizo на усовершенствованной микроархитектуре Excavator. Но симметричные предложения для десктопов не планировались вовсе. Дизайн Carrizo получил явную ориентацию на энергоэффективность, а потому применять его в моделях для платформы Socket FM2+ без серьёзной переделки AMD посчитала нецелесообразным. В результате мобильные процессоры по сравнению со своими настольными собратьями ушли несколько вперёд, но, по большому счёту, это мало кого волнует, потому что любые решения AMD с микроархитектурами класса Bulldozer заведомо уступают актуальным предложениям Intel во всём, кроме производительности графического ядра.
Впрочем, всё это не означает, что микроархитектура Excavator пройдёт мимо десктопного сегмента. Первые «переходные» процессоры для платформы Socket AM4, которая в перспективе должна будет стать типичной средой обитания для APU и CPU на базе принципиально нового дизайна Zen, будут основываться именно на базе Excavator. Принесут эту микроархитектуру в настольный сегмент запланированные на вторую половину этого года продукты семейства Bristol Ridge, которые помимо вычислительных ядер Excavator смогут предложить также интегрированную GCN 1.2-графику и контроллер памяти с поддержкой DDR4 SDRAM.
 
Однако AMD не была бы собой, если бы в изначальный достаточно стройный и логичный план по ходу дела не начали бы вноситься изменения. Одним из таких изменений стало недавнее появление среди десктопных процессоров для Socket FM2+ на базе Kaveri непредвиденной модели с дизайном Carrizo. Этим нежданным пришельцем стал Athlon X4 845, который, говоря формально, APU даже не является, а представляет собой процессор без графического ядра. Тем не менее от этого такая новинка выглядит даже интереснее. Ведь в итоге Athlon X4 845 – не только единственный на данный момент носитель микроархитектуры Excavator в настольном сегменте, но и самый дешёвый десктопный чип, способный предложить четыре почти полноценных вычислительных ядра. Столь оригинальный и соблазнительный продукт просто не мог быть обойдён вниманием нашей лаборатории, и поэтому он удостоился отдельного обзора.
 
Но ещё более значимым фактором, подогревающим интерес к Athlon X4 845, выступает то, что этот процессор даёт возможность заранее оценить, чего можно ожидать от Bristol Ridge в части вычислительной производительности. Кроме того, интригует и оригинальность этого продукта. Несмотря на то, что Athlon X4 845 основывается на наиболее современной версии микроархитектуры Bulldozer, он зашёл в линейку процессоров для Socket FM2+ не сверху, а снизу, выступая бюджетным и энергоэффективным решением. Объясняется это отчасти тем, что мы имеем дело с процессором, который стал десктопным поневоле: на самом деле под названием Athlon X4 845 производитель реализует полупроводниковые кристаллы Carrizo, которые либо имеют неработоспособное графическое ядро, либо неспособны вписаться в мобильные тепловые пакеты 15-35 Вт. То есть, говоря по-простому, Athlon X4 845 – это грубая десктопная адаптация ноутбучного чипа. Но уместен ли такой процессор в линейке продуктов для настольных систем? Давайте разберёмся.
?#Athlon X4 845 в подробностях
На первый взгляд характеристики Athlon X4 845 выглядят вполне привычно. Недаром AMD поместила этот процессор в старую линейку Athlon X4, в которую входят четырёхъядерные процессоры без графического ядра в исполнении Socket FM2+. Однако истинная сущность Athlon X4 845 – Carrizo – легко проявляется при более пристальном знакомстве и, например, хорошо видна в любой диагностической программе.
 
В основе Athlon X4 845 лежит два двухъядерных бульдозерных модуля с микроархитектурой Excavator. Отличия по сравнению с предшествующей, хорошо знакомой нам по Kaveri микроархитектурой Steamroller заключаются не только в малоосязаемых и незначительных улучшениях, а напротив, они видны невооружённым глазом. Достаточно посмотреть на подсистему кеш-памяти. В Steamroller кеш второго уровня вдвое сократился в объёме и теперь на каждый двухъядерный модуль отводится лишь 1 Мбайт L2. Зато L1-кеш данных, напротив, стал вдвое вместительнее. Его объём возрос до 32 Кбайт на ядро, причём попутно его ассоциативность увеличилась до восьмикратной, что должно поспособствовать снижению доли промахов.
Что же касается тактовой частоты, то, из-за ориентации десктопного Carrizo на начальный уровень, у него она ниже, чем у большинства Athlon X4 с дизайном Kaveri. Номинальная частота Athlon X4 845 составляет 3,5 ГГц, но благодаря имеющемуся в этом процессоре турбо-режиму (технология Turbo Core) она может динамически подниматься до 3,8 ГГц.
 
Обратить внимание стоит и на показатель расчётного тепловыделения. Для Athlon X4 845 он установлен в 65 Вт, что делает данный процессор одним из наиболее экономичных предложений в линейке четырёхъядерников компании AMD без интегрированной графики. Любопытно, что год назад, во время анонса мобильных Carrizo, представители компании утверждали, что выпуск процессоров с таким дизайном и тепловыми пакетами, превышающими 45-ваттную величину, невозможен. Однако по характеристикам Athlon X4 845 мы видим, что тогда AMD явно лукавила.
Ещё одно примечательное улучшение Athlon X4 845 по сравнению с предшественниками – появление поддержки AVX2-инструкций. Intel добавила этот набор команд в свои процессоры ещё в поколении Haswell, а теперь аналогичная функциональность становится доступна и в десктопной продукции AMD.
Подводя итог сказанному, приведём таблицу, в которой сопоставляются характеристики Athlon X4 845 и других актуальных моделей CPU, входящих в эту же серию.
 	Athlon X4 880K	Athlon X4 870K	Athlon X4 860K	Athlon X4 845	Athlon X4 840
Кодовое имя	
Kaveri
Kaveri
Kaveri
Carrizo
Kaveri
Процессорный разъём	
Socket FM2+
Socket FM2+
Socket FM2+
Socket FM2+
Socket FM2+
Количество ядер/потоков	
4/4
4/4
4/4
4/4
4/4
Тактовая частота	
4,0 ГГц
3,9 ГГц
3,7 ГГц
3,5 ГГц
3,1 ГГц
Максимальная частота в турборежиме	
4,2 ГГц
4,1 ГГц
4,0 ГГц
3,8 ГГц
3,8 ГГц
Разблокированный множитель	
Есть
Есть
Есть
Нет
Нет
L2-кеш	
2 ? 2 Мбайт
2   ?  2 Мбайт
2   ? Мбайт
2 ? 1 Мбайт
2   ?  2 Мбайт
L3-кеш	
Нет
Нет
Нет
Нет
Нет
Поддержка DDR3	
1866/2133
1600/1866
1600/1866
1866/2133
1600/1866
Расширения набора инструкций	
SSE4.2, AVX, AES
SSE4.2, AVX, AES
SSE4.2, AVX, AES
SSE4.2, AVX2, AES
SSE4.2, AVX, AES
Встроенная графика	
Нет
Нет
Нет
Нет
Нет
Технология производства	
28 нм
28 нм
28 нм
28 нм
28 нм
TDP	
95 Вт
95 Вт
95 Вт
65 Вт
65 Вт
Официальная цена	
$99
$94
$79
$68
Н/д
Для полноты картины следует упомянуть, что Athlon X4 845 основывается ровно на таком же 28-нм полупроводниковом кристалле Carrizo, как и мобильные процессоры FX, A10 и A8 восьмитысячной серии. Этот кристалл изначально содержит 3,1 млрд транзисторов и имеет площадь 250 мм2. Однако в Athlon X4 845 его значительная часть попросту не работает – в этом процессоре отключено не только графическое ядро, но и компоненты южного моста, которые среди прочего имеются в мобильном чипе Carrizo.
 Полупроводниковый кристалл Carrizo
Полупроводниковый кристалл Carrizo
В итоге в десктопном варианте Carrizo реально функционирует не более половины исходного кристалла. Иными словами, выпустив Athlon X4 845, AMD скорее ставила своей первоочередной задачей открытие канала для сбыта производственной отбраковки, а не развитие линейки Athlon X4.
 
Принципиальные отличия Athlon X4 845 от всех иных Socket FM2+-процессоров приводят к тому, что эта новинка совместима с имеющимся парком материнских плат только после обновления UEFI. Впрочем, вряд ли это станет серьёзной проблемой. Все ведущие производители уже выпустили версии прошивок с необходимыми изменениями.
?#Микроархитектура Excavator
Итак, появление Athlon X4 845 вводит в лексикон приверженцев настольных систем сразу пару новых кодовых имён: Excavator – это новая, следующая за Steamroller микроархитектура семейства Bulldozer, и Carrizo – дизайн гибридных процессоров, собранных из вычислительных ядер Excavator и графического ядра класса GCN 1.2. Стоит отметить, что Excavator выступает конечной точкой развития микроархитектур семейства Bulldozer. Вслед за ней в процессоры AMD должна прийти принципиально новая микроархитектура Zen, с внедрением которой компания связывает амбициозные планы по своему возвращению на позиции ведущего игрока процессорного рынка. И, говоря о переходе от Excavator к Zen, необходимо помнить ещё одно кодовое имя: Bristol Ridge – это перспективные «промежуточные» процессоры для мобильных и настольных систем, которые перенесут дизайн Carrizo в экосистему Zen и добьются её первоначального принятия индустрией ещё до появления принципиально новых APU и CPU.
Всё это значит, что микроархитектура Excavator не станет залётным гостем в десктопном сегменте. Ей отведена достаточно серьёзная роль. Фактически она будет сопровождать нас до начала 2017 года. Athlon X4 845 же – это своего рода пробный шар, по которому мы имеем возможность составить первоначальное мнение об этой микроархитектуре ещё до появления на рынке новой платформы Socket AM4 и процессоров Bristol Ridge.
На нашем сайте уже был опубликован достаточно подробный материал о процессорах Carrizo в общем и микроархитектуре Excavator в частности. Здесь же мы просто упомянем основные факты, достаточные для понимания того, чем же так примечателен Athlon X4 845.
И начнём с самого главного: Excavator – это такая же 28-нм процессорная микроархитектура, как и предшествующая ей Steamroller, но переработанная с целью улучшения энергоэффективности. Проектирование Excavator велось с прицелом на попадание процессоров в 15-ваттный тепловой пакет, и в итоге эта микроархитектура действительно показывает впечатляющее увеличение производительности в условиях жёстких рамок по тепловыделению. Но происходит это в первую очередь за счёт более высоких тактовых частот, достижимых Excavator при серьёзно ограниченном энергопотреблении и тепловыделении.
 
Ключом к покорению таких рубежей стало применение при проектировании ядра технологических библиотек с высокой плотностью расположения транзисторов, которые при разработке традиционных процессоров обычно не используются. Подобный подход характерен скорее для GPU, однако в данном случае он оказался полезен и при создании энергоэффективного процессорного дизайна. Плотность размещения транзисторов полупроводникового кристалла Excavator по сравнению с Steamroller выросла в среднем на 23 процента, и в случае Carrizo это освободило дополнительный транзисторный бюджет для встраивания в процессор более мощного графического ядра и компонентов южного моста.
 
Однако одними лишь технологическими улучшениями дело не ограничивается. AMD обещает, что на одной и той же частоте Excavator по сравнению со Steamroller способен исполнять на 4-15 процентов больше инструкций за счёт усовершенствований на низком уровне микроархитектуры. Достигается это преимущество благодаря увеличению размеров и изменению алгоритмов работы кеш-памяти первого уровня. В частности, ёмкость L1-кеша данных в Excavator увеличилась вдвое – до 32 Кбайт на ядро. Кроме того, AMD говорит и о снижении латентности этого кеша вкупе с улучшением эффективности предварительной выборки данных.
 
Другая причина улучшения показателя IPC (количества исполняемых за такт инструкций) – полуторакратное увеличение размера буфера адресов ветвлений. Это делает предсказание переходов в ядре Excavator статистически более правильным. В случае же ошибок микроархитектура Excavator обещает ускоренный сброс конвейера вещественных чисел.
К портрету Excavator остаётся лишь добавить появление поддержки AVX2-инструкций – набора, в который входят векторные 256-битные целочисленные команды и векторные команды для операций с тремя операндами. Впрочем, пока такие инструкции применяются в реальных программах не слишком часто, да и не стоит забывать о том, что исполняются они блоком FPU, который в архитектурах класса Bulldozer всего один на каждые два ядра.
Иными словами, каких-то особенных преимуществ у Excavator нет. А весь обещанный прогресс легко может быть сведён на нет уменьшением объёма L2-кеша, размер которого составляет теперь не 2, а 1 Мбайт на каждый двухъядерный модуль. Иными словами, у четырёхъядерных процессоров с микроархитектурой Excavator общий объём кеш-памяти составляет всего 2 Мбайт, чего для многих современных приложений может не хватать. И особенно критичен данный недостаток именно для APU, в которых третий уровень кеширования вообще не предусмотрен.
?#Северный мост и производительность подсистемы памяти
Кажется, что основная часть изменений в Excavator по сравнению с Steamroller проведена в подсистеме памяти. Отчасти это действительно так, но далеко не все перемены можно оценить со знаком плюс. Да, L1-кеш стал больше и эффективнее, но кеш-память второго уровня серьёзно пострадала – её суммарный размер у Athlon X4 845 уменьшился до скромных 2 Мбайт (похожий объём кеша характерен лишь для процессоров Intel Celeron), а ведь остальные Athlon X4 могут похвастать 4-мегабайтным L2-кешем.
 
Ещё один удар по производительности подсистемы памяти оказался нанесён через встроенный в процессорный кристалл Carrizo северный мост. Его частота у Athlon X4 845 снижена до 1,1-1,3 ГГц (точное значение зависит от нагрузки), в то время как в процессорах семейства Kaveri северный мост работает на частоте 1,8 ГГц. Учитывая же, что частью встроенного северного моста является контроллер памяти, можно ожидать, что производительность Athlon X4 845 при работе с DDR3 SDRAM окажется ниже, чем у процессоров с более ранним дизайном.
 
Проверить всё это несложно. Для этого мы воспользовались традиционным инструментом – утилитой Cache & Memory Benchmark из пакета AIDA64. Тест был проведён для четырёхъядерных Athlon X4 860K (Steamroller) и Athlon X4 845 (Excavator), работающих на одинаковой фиксированной частоте 3,5 ГГц c одной и той же DDR3-2133-памятью со схемой задержек 9-11-11-31.
 
 	
 
Steamroller 3,5 ГГц 
 	
 Excavator 3,5 ГГц     
Результаты вполне ожидаемы и объяснимы. Скорость кеш-памяти у Carrizo, как и обещала AMD, стала выше, что отчасти компенсирует её меньший суммарный объём. Но вот с основным массивом оперативной памяти процессор с новой микроархитектурой Excavator работает заметно хуже. Особенно сильно это проявляется в выросшей почти на 20 процентов латентности – сниженная частота работы северного моста не могла не дать о себе знать. Очевидно, что за счёт этого разработчики AMD хотели сделать Carrizo экономичнее, но в данном случае такое стремление негативно повлияло на производительность.
Кстати, мобильные корни Carrizo видны и ещё в одной неприятной особенности встроенного в Athlon X4 845 северного моста. Расположенный в нём контроллер графической шины обладает лишь восемью линиями PCI Express 3.0. И это не только лишает пользователей десктопного Carrizo возможности построения мульти-GPU конфигураций, но и вносит дополнительные ограничения в производительность видеоподсистемы.
 
Конечно, пропускной способности шины PCI Express 3.0 x8 для современных графических карт в большинстве случаев вполне достаточно, но это не отменяет того факта, что в сборках на базе Athlon X4 845 графика в любом случае будет работать не в полную силу.
?#Особенности турборежима
При тестировании Athlon X4 845 мы заметили, что технология Turbo Core работает в нём не совсем так, как у его предшественников с дизайном Kaveri. Раньше турборежим у Socket FM2+-процессоров включался только в том случае, если вычислительная нагрузка ложилась не более чем на половину ядер, а встроенные в процессор датчики фиксировали благоприятный температурный фон. По этим причинам повышенную тактовую частоту у Kaveri можно было наблюдать лишь при малопоточной и достаточно лёгкой нагрузке. В ресурсоёмких же приложениях частота всегда сбрасывалась до номинального значения или даже ниже.
У Athlon X4 845 же всё стало совсем по-другому. В процессорах поколения Carrizo работа технологии Turbo Core привязана исключительно к показаниям встроенных в ядро датчиков температуры и потребляемой мощности и никак не зависит от того, какое количество ядер процессора реально работает, а какое находится в состоянии простоя. А если к этому прибавить тот факт, что для Athlon X4 845 установлен достаточно либеральный для чипа с мобильными корнями тепловой пакет, то становится совершенно очевидно, что переходить в турборежим он способен гораздо чаще. И действительно: несмотря на то, что номинальная частота Athlon X4 845 – 3,5 ГГц, в большинстве случаев этот процессор работает на 3,7-3,8 ГГц. Причём, активация турборежима нередко происходит даже при исполнении ресурсоёмких многопоточных программ.
В качестве иллюстрации покажем, например, как изменяется реальная частота во время прохождения стресс-теста в LinX 0.6.5.
 
Даже в течение создающего очень серьёзную нагрузку теста стабильности частота вычислительных ядер тяготеет к величине 3,8 ГГц. Иными словами, переходить в режим с повышенной частотой Athlon X4 845 умудряется при весьма тяжёлой нагрузке. Процессоры поколения Kaveri на такое были совершенно неспособны. Получается, что по средней реальной частоте работы Athlon X4 845 сопоставим с Athlon X4 860K: Carrizo почти всегда работает с активированным турборежимом, а Kaveri наоборот – чаще функционирует в своём номинальном режиме. Впрочем, справедливости ради стоит отметить, что провалы частоты ниже штатного значения – в данном случае до 3,1 ГГц – никуда не делись и у Athlon X4 845. Но теперь их можно наблюдать лишь эпизодически.
Столь охотное включение процессором Carrizo турборежима подкрепляется и ещё одним наблюдением: нагрев Athlon X4 845 во время работы очень скромен. В тестировании мы по традиции пользовались воздушным кулером Noctua NH-U14S, и максимальная температура CPU, которая была зафиксирована во время прогонов теста LinX, достигала лишь 39 градусов (согласно показаниям термодатчика в процессорном гнезде). Так что причины агрессивности технологии Turbo Core у Athlon X4 845 не вызывают никаких вопросов.
?#Разгон
Процессор Athlon X4 845 относится к числу бюджетных и потому не входит в оверклокерскую серию, что однозначно следует из его модельного номера, в конце которого нет литеры К. Это значит, что его множитель заблокирован, и 35x – это максимальный коэффициент умножения, который можно выставить в BIOS материнской платы для данного CPU. Тем не менее разогнать Athlon X4 845 всё-таки можно: современные Socket FM2+-материнские платы позволяют покорять повышенные частоты другим способом – через увеличение частоты BCLK.
Впрочем, даже с учётом имеющегося обходного пути особых достижений в плане разгона от Athlon X4 845 ожидать не стоит. Не забывайте, этот процессор основан на дизайне Carrizo, который имеет мобильные корни и нацелен на энергоэффективность, а вовсе не на работу на высоких тактовых частотах. К тому же разгон через увеличение частоты основного тактового генератора в Socket FM2+-системах не всегда проходит безболезненно. Например, при таком подходе к оверклокингу часто возникают сбои в работе встроенного в чипсет SATA-контроллера, лечить которые с переменным успехом приходится его переводом из AHCI в IDE-режим и дополнительным увеличением напряжений VDDA и APU1.2V.
Но и даже после всех подобных ухищрений разгон десктопного Carrizo не даёт особых поводов для радости. Например, наш экземпляр Athlon X4 845 продемонстрировал устойчивую работоспособность лишь на частоте 4,2 ГГц, которая была достигнута увеличением BCLK до 120 МГц.
 
Для обеспечения стабильности в таком состоянии напряжение на процессоре пришлось поднять до 1,6 В, но в данном случае эта величина не кажется чрезмерной – штатное напряжение процессоров Athlon X4 845 находится в диапазоне 1,46-1,49 В. Не давал никаких поводов для беспокойства и температурный режим. Нагрев разогнанного процессора во время тестирования стабильности в LinX, по данным термодиода под процессорным гнездом, не превышал 44 градусов. Кстати, пользоваться именно расположенным на материнской плате термодатчиком, а не измерительными средствами самого CPU заставляет традиционная для продукции AMD странная калибровка, из-за которой показатели встроенных в Carrizo термодатчиков совершенно неправдоподобны.
Подытоживая всё сказанное в данном разделе, остаётся признать, что Athlon X4 845 – очень плохой кандидат для эксплуатации на повышенных частотах. Разгонять его сложно из-за нестабильности материнских плат при ускорении базового тактового генератора, а частотный потенциал самого этого чипа значительно ниже, чем у его собратьев из семейства Kaveri. И это обусловлено не неудачностью конкретного экземпляра CPU, а глобальными причинами – оптимизацией для мобильного применения и в первую очередь высокоплотной компоновкой транзисторов в полупроводниковом кристалле Carrizo.