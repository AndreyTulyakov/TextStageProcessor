
Обзор быстрых накопителей Intel Optane SSD 900P и Samsung 960 Pro
Оглавление

    Intel Optane SSD 900P 280 ГБ
    Samsung 960 Pro 512 ГБ
    Конкуренты
    Тестирование
    Методика тестирования
    Производительность в приложениях
    Последовательные операции
    Случайный доступ
    Работа с большими файлами
    Рейтинги
    Цены
    Итого

Методика тестирования накопителей образца 2016 года

Знакомясь с протоколом NVMe, мы отмечали, что максимальную пользу от его внедрения могут получить устройства на новых типах памяти, а вовсе не NAND-флэш, который сам по себе имеет высокие (относительно) задержки, да и организация работы такой памяти в целом близка к «блочной». Другой вопрос, что некоторое время никакого выбора у покупателей не было — не считать же им выбор между MLC и TLC? Тем более, что MLC все равно отмирает в качестве массового продукта.

Зато появился Optane. Вообще, первая информация о памяти типа 3D XPoint появилась давно, но одно дело разработка, а другое — массовое производство. И до сих пор это самое массовое производство налажено не так хорошо, как планировалось. Во всяком случае, из ожидавшихся осенью новых продуктов мы увидели лишь один (еще пара была анонсирована совсем недавно, они пока не успели добраться не только лишь до магазинов). Зато анонсированный продукт безоговорочно относится к категории топовых — как раз такими устройствами надо привлекать внимание к новой памяти: их если и не купят, то хотя бы обсуждать будут. А сегодня мы будем не только обсуждать, но и тестировать.
Intel Optane SSD 900P 280 ГБ

Как обычно (для Intel) бескомпромиссные накопители для экстремалов представляют собой немного перелицованную серверную линейку с другими емкостями: 280 и 480 ГБ. Кстати, отметим, что рекомендованные цены оказались неожиданно невысокими — $389 и $599. Нет, недорогим в общечеловеческом смысле слова такое устройство, конечно, не назовешь — это дорогой накопитель. Однако все познается в сравнении: в 2009 году Intel X25-M выходил на рынок с CRP $595, причем при емкости всего 80 ГБ. Теперь оглянемся вокруг и посмотрим, как изменился рынок :)

Шансов на повторение подобной революции мало, но об этом мы поговорим в конце. Понятно, что при ценах в районе доллара за гигабайт на установку в каждый компьютер 900P не рассчитан, поэтому никто не пытался «запихнуть» его в универсальный форм-фактор типа M.2. У более дешевого (правда, и менее емкого и изначально ограниченного интерфейсом) Optane 800P, когда он появится, это будет. А пока только плата PCIe либо 2,5″ 15 мм (типичный серверный вариант). Зато нет и не может быть никаких проблем с охлаждением, поскольку плату легко снабдить парой красивых радиаторов, которые будут рассеивать до 14 Вт тепла в нагруженном режиме, что чуть больше, чем у сравнимых по емкости модификаций Intel 750 в аналогичном исполнении, но в полтора раза меньше, чем у старших представителей упомянутого семейства.

Под радиаторами ничего особо интересного: контроллеры, естественно, делает только Intel, память, естественно, делает только IMFT. Правда, памяти по меркам современных устройств на базе NAND-флэша очень много: 21 микросхема в младшей версии, 28 в старшей. Контроллер семиканальный, так что можно было обойтись и меньшим количеством чипов, но вот как раз со степенью интеграции пока не все хорошо. Зато это позволяет делать очень быстрые устройства — при том, что кроме контроллера и флэш-памяти под радиаторами ничего нет. Накопители на NAND-флэш без такого компонента, как DRAM, обходиться не могут, кроме разве что совсем бюджетных и медленных моделей, которым, по-хорошему, до сих пор и SATA-интерфейса многовато (в чем мы уже убеждались в тестах). В данном же случае имеем топовое устройство, которому не нужны «костыли», типа кэширования. Новая память имеет задержки повыше, чем у классической оперативной памяти, но все равно намного более низкие, чем у любых массовых энергонезависимых носителей, так что и кэширование записи средствами операционной системы можно отключить. Точнее, на данный момент его даже нельзя включить. Циклы стирания тоже не нужны — можно просто писать безотлагательно, что обеспечивает определенное преимущество в надежности и отсутствие необходимости в каких-то сложных схемах, «спасающих» от сбоев питания. Так что Optane — это не только «про скорость». Это действительно накопители нового типа, хотя и полностью совместимые с другими твердотельными накопителями. А с точки зрения приложений — и с «механикой» тоже.

Последнее, правда, и плохо, и хорошо одновременно. С одной стороны, 900P можно уже сегодня купить, установить в обычный компьютер и... просто пользоваться, получая (где возможно) преимущества в скорости работы. С другой стороны, слишком редко это будет возможно, поскольку программисты сейчас ориентируются даже не на NAND-флэш — они исходят из того, что в массовом компьютере есть ровно один накопитель, да и тот — винчестер, используемый и для программ, и для данных. Поэтому некоторые пользователи ПК, решившиеся на покупку твердотельного накопителя, иногда удивляются отсутствию «вау-фактора»: вроде бы что-то как-то ускорилось и стало комфортнее, но... хотелось бы большего. Вот это, как раз, и есть плата за совместимость и наследие прошлого. Например, загрузка уровня игры с винчестера идет медленно — а давайте вставим сюда неотключаемый видеоролик, чтоб геймер не скучал. Вставили. Геймер купил SSD — а ролик так и остался неотключаемым, и переход между уровнями как занимал пару минут, так и занимает. И т. д. и т. п. Обо всем этом нужно помнить — и не надеяться на то, что быстрый накопитель мгновенно решит все проблемы, а очень быстрый — заодно начнет сам «деньги в семью нести». На самом деле, нет. Просто быстрое устройство как минимум никогда не хуже медленного, а если повезет — то и лучше.

Да и тем, что Optane SSD 900P не только лишь быстрое устройство, вовсе не обязательно удастся воспользоваться. Например, теоретически, можно бы сократить расход памяти на всякие кэши... но только если в системе нет накопителей других типов, чего при нынешнем уровне цен придется ждать долго :) Гарантийные условия Optane SSD 900P вполне соответствуют классу: не просто пять лет гарантии (столько Intel готова давать и на свои TLC-накопители), но и ограничение полного объема записанных данных, измеряемое уже петабайтами: 5,11 или даже 8,76 ПБ в зависимости от емкости. Однако и десятки терабайт TBW у бюджетных SSD тоже несколько избыточны — это просто заслон на пути желающих использовать их не по назначению. И в случае Optane SSD 900P подход аналогичный: у «профессиональной» серии Р4800Х заявлены уже десятки петабайт.

В общем, это быстрый и дорогой твердотельный накопитель, пригодный для использования везде, куда вообще «поместится» твердотельный накопитель в таком исполнении. Значит, его можно как минимум протестировать, чем мы и займемся.
Samsung 960 Pro 512 ГБ

В отличие от Optane, ничего такого уж интересного технически в SSD Samsung не бывает: просто нормальный ширпотреб, полученный эволюционным «вылизыванием» давно существующих технологий. С другой стороны, компания умеет производить его действительно массово — особенно когда речь идет о полупроводниковых продуктах. Так получилось и с NAND-флэш: Samsung оказался одним из первых, кто пустил TLC-память в массовые SSD, а позднее первым освоил 3D NAND. Первое время, впрочем, в топовых устройствах компания продолжала конфигурировать чипы как MLC, да и NVMe-устройств на TLC до серии 960 не было вообще. Но вот в ней появились 960 Pro и 960 Evo, причем первый, по-видимому, так и останется лучшим устройством компании данного класса: в моделях наступившего года использование MLC-памяти не планируется. Это, в принципе, понятно: рынку MLC уже не слишком-то нужна, так что все ведущие производители от нее либо отказались, либо планируют. Но скоростные показатели от этого, разумеется, как минимум не увеличатся.

А так в целом Samsung 960 Pro, как уже было сказано, ничего принципиально нового в себе не несет — по конструкции он аналогичен знакомому нам 950 Pro. Разве что память MLC 3D V-NAND нового поколения на 48 слоях вместо 32 ранее, но это положительно влияет на емкость и цену, снижая скорость. Впрочем, не обязательно: у контроллера параллельно увеличили число ядер с трех до пяти. Правда, от SLC-кеширования по каким-то причинам пришлось отказаться, так что иногда «вытянуть» производительность на аналогичный предшественнику уровень не получится никак. А вот DRAM-кэш на месте — все тот же привычный «мегабайт на гигабайт емкости». Исполнение тоже: обычная карта M.2, об охлаждении которой должен заботиться сам пользователь. Впрочем, тепловыделение несколько снизилось, так что теперь «перегреть» накопитель до тротлинга можно только совсем уж дикой синтетикой. Устройство не слишком дешевое: цена гигабайта отличается от Optane всего-то в два раза и радикально превосходит уровень нормальных массовых устройств. Но это понятно: линейка «Pro» всегда позиционировалась как экстремальная, и это действительно так. В конце концов, вымирание MLC-устройств связано лишь с их невостребованностью, а не с недостатками ТТХ, типа «нехватки» производительности. Производительность-то как раз ожидаемо высокая. И гарантия тоже ожидаемая — пять лет при ограничении TBW 400 ТБ (для модели на 512 ГБ; у старших пропорционально). Осталось лишь упомянуть, что тестировали мы накопитель с прошивкой версии CXP7 и перейти непосредственно к тестам.
Конкуренты

Поскольку у нас сегодня есть накопитель принципиально нового типа, его практически не с кем сравнивать непосредственно. Вот с 960 Pro можно, для чего мы его и привлекли, но тогда есть смысл взять и более старый 950 Pro — заодно и эту пару сравнить. И Intel 750 пригодится — до последнего времени именно он оставался топовым решением компании для потребительского рынка. Но 950 Pro и 750 мы в свое время тестировали вместе с Kingston HyperX Predator: PCIe х4, но 2.0 и AHCI. Почему бы и не повторить, взяв заодно в качестве ориентиров также пару Intel 545s и 600р. А также Plextor M8Pe.

Все эти накопители очень разные и работают с очень разными скоростями. Но это и хорошо — они реализуют большинство комбинаций интерфейсов, протоколов и типов памяти, использующихся сейчас на рынке накопителей на базе NAND-флэш. В итоге и хорошо будет видно — где что и на что влияет.
Тестирование
Методика тестирования

Методика подробно описана в отдельной статье. Там можно познакомиться с используемым аппаратным и программным обеспечением.
Производительность в приложениях

К тому, что твердотельные накопители демонстрируют примерно одинаковые результаты в этом тесте, мы уже давно привыкли. Даже если взять устройства разных классов, причем находящиеся на разных концах ассортимента — SSD на базе TLC NAND с SATA интерфейсом (как и положено, самый медленный) отличается от топового NVMe-устройства (где вовсе не NAND, не говоря уже о прочем) пренебрежимо мало. Как такое может получиться, если разработчик утверждает, что этот тест демонстрирует именно быстродействие накопителей, а не прочих компонентов системы? Да очень просто — он, все-таки, старается это делать в условиях, максимально приближенных к реальным: учитывая потребности программного обеспечения. А последнему «хватает» любого твердотельного накопителя, поскольку программисты учитывают тот факт, что наличие последнего вообще хороший, но до сих пор не такой уж и частый случай. Вот винчестеров — мало. Любых. Поэтому внутри этого сегмента можно найти и какие-то различия между моделями, не говоря уже о классах устройств (например, «ноутбучная» модель со скоростью вращения пластин 5400 об/мин будет работать еще медленнее, чем «настольная» на 7200 об/мин), но как только мы отказываемся от механики в пользу, хотя бы, eMMC-модуля флэш-памяти, не говоря уже о накопителях с «полноценными» интерфейсами, так сразу и оказывается, что достаточно любого. Что в первую очередь, разумеется, «бьет» по топовым накопителям. И, в особенности, будет мешать продвижению Optane в массовый сегмент — заметить какие-то преимущества нового типа памяти «в быту» невооруженным глазом не получится.

А вот низкоуровневая оценка того же пакета, демонстрирующая как накопители могли бы работать, если б им не мешали, разумеется, для всех разная. SATA-устройства как правило не дотягиваются и до 300 МБ/с (и это речь только о самых быстрых моделях — некоторые вполне современные бюджетные накопители «не могут» и 200 МБ/с) — бюджетные NVMe-твердотельники (типа Intel 600p или WD Black) с этого уровня только начинаются. Дальше — вотчина небюджетных NVMe-устройств, простирающаяся до 600-700 МБ/с. Вернее, «простиравшаяся» — смена памяти, как видим, «пришпоривает» SSD ничуть не хуже, чем внедрение новых протоколов и интерфейсов. Казалось бы, есть повод для радости — если забыть о том, что это лишь потенциальное быстродействие. Для утилизации которого необходимо и ПО писать соответствующим образом — в расчете на наличие соответствующего устройства в компьютере. А не винчестера с его 10-20 МБ/с «пропускной способности».

Предыдущая версия PC Mark демонстрирует нам в общем-то тоже самое — несмотря на то, что трассы этого пакета соответствуют более старым программам, суть от этого не меняется. Современные твердотельные накопители работают далеко не на пределе возможностей. Даже не самые новые и/или бюджетные модели «могут» больше, чем от них требуется в персональном компьютере. Для чего же нужны топовые модели? Зачастую, «чтобы было». В этом плане, кстати, показательно результаты Samsung 950 Pro сравнительно с 960 Pro — более новый накопитель при одинаковой емкости формально стал работать даже немного медленнее. Но этим можно пренебречь, поскольку запас производительности так и остался огромным. Зато новая память дешевле, а одинаковой емкость бывает редко — в данной  линейке Samsung удалось повысить ее до 2 ТБ, причем некогда максимальные 512 ГБ стали минимальными.
Последовательные операции

Большого значения производительность на таких операциях не имела и раньше, но, поскольку некоторые пользователи до сих пор обращают на нее внимание, определенное соревнование производителей по этому параметру тоже наблюдается. Если, конечно, есть такая возможность — при чтении данных, например, определяющее значение имеет интерфейс. Да и при записи многим классам накопителей он тоже уже мешает. «Собственные» же особенности памяти любого типа — не слишком: все равно работа ведется большими блоками, которые можно еще и эффективно разнести по каналам и микросхемам. В принципе, пара гигабайт в секунду уже вполне достижима, т. е. и в этой дисциплине твердотельные накопители сумели «оторваться» от винчестеров на порядок. По крайней мере, на небольших объемах данных.
Случайный доступ

Для понимания что и как, имеет смысл отделить запись от чтения. Начнем с последнего.

В обеих программах легко заметить, что при единичной длине очереди производительность всех накопителей на базе NAND-флэш практически идентична, а вот Optane радикально отличается от них. Причина — понятна: все определяется собственными задержками носителя, а они как раз и различаются у памяти разных типов. Работа с «длинными очередями» позволяет достичь более высоких скоростей при использовании более быстрых интерфейсов и протоколов — появляется уже резерв для увеличения производительности, поскольку команды можно выполнять параллельно. В первом же случае параллелизму взяться неоткуда, поскольку запросы поступают строго последовательно один за другим. В удобном для NAND раскладе, впрочем, «отзывчивая» память все равно быстрее, но разница сокращается с четырех до полутора-двух раз.

Что же касается записи, то тут работу можно разбрасывать по каналам и чипам даже при единичной очереди, поскольку нет необходимости ждать окончания одной операции до инициации следующего запроса. При увеличении интенсивности до определенного предела «свобода выбора» у контроллера растет, так что и производительность растет. И вот в этом случае уже «количество попугаев» легко может определяться не только аппаратными характеристиками, но и тем, насколько хорошо программисты поработали над прошивками. К примеру, достаточно обратить внимание на поведение Samsung 950 Pro и Plextor M8Pe: «начинают» они оба одинаково (как и должно быть), но производительность первого при глубине очереди более четырех команд перестает расти, так что он оказывается сопоставим со многими устройствами формально более низкого класса. А вот в 960 Pro таких проблем нет — он при таких нагрузках один из самых быстрых. Иногда может и «новомодный» Optane победить. Т. е. мы к чему — строго говоря, такие нагрузки зависят не только и не столько от типа установленной памяти. Впрочем, типичными для персональных компьютеров они вообще не являются, а в серверах более важна даже не пиковая производительность в короткие моменты времени, а обеспечение определенного ее уровня именно при интенсивных длительных нагрузках. Но этими сценариями мы не занимаемся.

В жизни же «обычного пользователя», как уже не раз было сказано, максимальное значение имеют операции чтения с единичной очередью. И здесь, повторимся, конкурентов у Optane на данный момент практически нет, а все остальные твердотельные накопители можно считать идентичными друг другу. Почти идентичными. Другой вопрос, что обеспечиваемого ими уровня производительности современному ПО даже многовато — так что его увеличение тем более пока не слишком нужно.
Работа с большими файлами

А тут как обычно — задача на интерфейс, контроллер, прошивки... и где-то ближе к концу наступает очередь самой памяти. В принципе, с интерфейсом у 900P все хорошо, с контроллером тоже, с прошивками (предположительно) тоже нормально — так что он практически всегда оказывается одним из самых быстрых. А иногда и самым быстрым. А иногда и самым быстрым с большим отрывом от прочих. Но в общем-то это все пока не его целевое назначение.
Рейтинги

Суммарно Optane 900P самый быстрый, но несложно заметить, что достигнуто это благодаря высочайшему результату на операциях чтения. А получен этот результат благодаря выдающимся скоростям на случайных операциях «без очереди», т. е. как раз тому, что зависит исключительно от памяти. С прочими операциями еще можно что-то сделать (и конструкторы действительно делают), а вот с этими — никак. Нужно или нет — отдельный вопрос.

В итоге устройство получает высокие оценки и в тестах высокого уровня, так что суммарно имеем действительно «выход из класса»: 900P перевалил за 11К, а никто другой и 9К не осилил. Так что да — очень быстро. И иногда — там, где нужно. Но на практике программам еще какой-нибудь 600p неизвестно когда удастся полностью утилизовать, да и обычные SATA-модели, вообще-то, тоже.
Цены

В таблице приведены средние розничные цены протестированных сегодня SSD-накопителей, актуальные на момент чтения вами данной статьи:
Intel SSD 545S 512 ГБ	Intel SSD 600p 512 ГБ	Intel Optane SSD 900P 280 ГБ	Kingston HyperX Predator 480 ГБ	Plextor M8Pe 512 ГБ	Samsung 950 Pro 512 ГБ	Samsung 960 Pro 512 ГБ

Итого

Как видим, в некоторых сценариях, где из NAND-флэша еще можно что-то «выжать», Optane впечатления не производит: это очень быстрый твердотельный накопитель, но не более того. Зато он хорошо справляется с нагрузками, производительность на которых не росла практически уже лет 20. Точнее, выросла за это время один раз — при переходе с механики на флэш, на чем все и остановилось. Но по иронии судьбы это как раз те сценарии, которые наиболее важны на практике. Да и кроме скорости за новую память есть аргументы.

Может быть, мы недаром вспоминали про X25-M и ожидаем очередную аналогичную революцию? Нет, революции не будет. Предыдущая произошла не только из-за того, что винчестеры перестали справляться с работой. На самом деле, в настольных персональных компьютерах они до сих пор господствуют — хватает же многим, а стоят дешево. Однако в ноутбуки они помещались уже похуже. А «революция смартфонов» на механике и вовсе не случилась бы. Т. е. новые рынки — то, что в первую очередь и увеличило сбыт флэш-памяти. Компьютеры — лишь в числе прочих. Скорость имеет значение, но хотя винчестеры и стали к тому моменту «узким местом» и тем более являются им сейчас, многие пользователи как-то обходятся.

Разумеется, в этом плане память 3D XPoint ничего принципиально нового рынку не дает: в первом приближении это все те же твердотельные накопители для тех же сфер применения, что и «традиционные». Причем они заметно дороже, хотя и компенсируют это скоростью и надежностью и имеют другие достоинства. Но радикальной необходимости в увеличении производительности пока нет (программное обеспечение, как не раз уже было сказано, пока еще «отстает» в массе своей даже от возможностей бюджетных SSD, не говоря уже о топовых), а вот цены как раз до сих пор остаются главным сдерживающим экспансию полупроводниковых накопителей фактором. У 3D XPoint они все еще выше, чем у NAND — значит, тем хуже для нее.

Впрочем, в рамках небольшого сегмента рынка кое-что изменится. Вспомним: появление первых SSD не слишком повлияло на массовые винчестеры (они живы и сейчас), зато истребило скоростные потребительские модели, типа WD Raptor. Небольшое увеличение скоростей в пределах класса винчестеров стало бесполезным, поскольку появилась возможность взять и выйти за его рамки. Дорого, да — но и винчестеры с повышенной скоростью вращения тоже стоили дороже «обычных». Вот нечто аналогичное мы увидим и сейчас: попытки продвигать SSD высокой производительности на базе NAND-флэш стали бессмысленными. Зачем — если есть Optane? С другой стороны, MLC-память все равно уже начала покидать рынок, а в наступившем году этот процесс в любом случае пришел бы к своему логическому завершению. Просто Intel Optane SSD 900P и прочие аналогичные продукты немного подстегнут процесс и сами безраздельно займут должность «царя горы» — до тех пор, пока не появится еще какая-нибудь конкурентоспособная технология. Но NAND-флэш в любом исполнении, как видим, здесь (в отличие от бюджетного сектора) «ловить» уже абсолютно нечего. 