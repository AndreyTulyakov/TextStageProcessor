
Обзор серверного SSD-накопителя Western Digital Ultrastar DC SN200 емкостью 3,2 ТБ и тест в качестве десктопного
Оглавление

    Western Digital Ultrastar DC SN200 3,2 ТБ
    Образцы для сравнения
    Тестирование
    Методика тестирования
    Производительность в приложениях
    Последовательные операции
    Случайный доступ
    Работа с большими файлами
    Рейтинги
    Итого

Методика тестирования накопителей образца 2018 года

Разделение накопителей на «бытовые» и «профессиональные» началось не вчера. Во времена господства на рынке механики нередко воспринималось как досадное теоретическое недоразумение, каковое так и тянуло исправить. В частности, потому, что рассчитанные на корпоративный рынок винчестеры обычно использовали более быстрые интерфейсы, первыми осваивали высокую скорость вращения пластин и т. п. Если, например, условно-персональные винчестеры на 10 тысяч оборотов в минуту в свое время появились (но куда позднее, чем таковые для корпоративного сегмента), то 15 тысяч так никто и не освоил. А иногда и деваться было некуда — SCSI-винчестеры на 1 ГБ, появились, к примеру, когда дешевые IDE-модели в принципе не могли перевалить за 512 МБ (и не надо смеяться над цифрами — 25 лет назад и то, и другое было, в общем-то, серьезной величиной). Понятно, что за «нецелевое использование» приходилось серьезно доплачивать — но таковое обеспечивало покупателю и определенные плюсы. Поэтому, например, некогда SCSI-винчестеры постоянно тестировались в нашей лаборатории — в т. ч. и применительно к «персональным» нагрузкам.

А вот «корпоративные» и «серверные» SSD мы тестировали очень-очень редко. Во многом потому, что мир сильно изменился — большинство из них технически неотличимо от «бытовухи», но имеет, например, другие условия гарантии. Не слишком интересные для персонального покупателя, так что, с учетом более высокой цены, и сами устройства оказываются «неинтересными» ему. Что может пригодиться — то нередко мигрирует и в массовый сегмент. Так, например, у Intel «рождались» SSD серий 730 и 750 — а позднее и Optane SSD 900Р/905Р. И не только — из последних новинок можно вспомнить продающийся на розничном рынке Seagate IronWolf 110 для NAS, получившийся из серверного Nytro 1351.

Но есть и модели, которым сложно подобрать «родственника» среди массовых предложений. Тем не менее, имеющие интересные технические характеристики — тоже не имеющие аналогов. Что сразу вызывает вопрос: а что будет, если попробовать использовать их в качестве «SSD вульгарис» — так, как в свое время иногда применялись «высокооборотистые» винчестеры. Понятно, что стоит это дорого, да и могут быть проблемы с самим по себе процессом покупки (или, если не повезет, гарантией), но возможность-то такая есть... Вдруг есть смысл ей воспользоваться? Проверим на одном примере — иногда полезно и это делать.
Western Digital Ultrastar DC SN200 3,2 ТБ

Изначально этот накопитель появился на рынке под названием HGST Ultrastar SN260, однако в процессе ребрендинга, начавшегося год назад из-за завершения слияния HGST и Western Digital, он получил и немного обновленное название. К сожалению, это добавило и путаницы: нынешние SN200 — это и SN260, и SN200 из продуктовой корзины HGST. А они очень разные, хоть и родственники: в частности, «оригинальный» SN200 это SSD формата U.2 (аналогичного винчестерам с высокой частотой вращения на пластинах диаметром 2,5″ в корпусах высотой 15 мм), использование которых в персональных системах не слишком удобно. К тому же, эта линейка двухпортовая, т. е. каждое устройство с интерфейсом PCIe 3.0 x4 может рассматриваться как два виртуальных х2 со своими отдельными очередями команд — что протокол NVMe позволяет. А вот контроллеры «бытовых» систем — нет. Бывшие же SN260 — накопители в форм-факторе обычных карт расширения PCIe и совместимы с любыми системами. Причем имеют и ряд априорных преимуществ перед массовыми SSD — чем и интересны для использования «не по назначению». Так что HGST Ultrastar SN260 мы сегодня и будем изучать. Но именовать его будем в соответствии с новой системой наименований — Western Digital Ultrastar DC SN200. Не забывая при этом, что SN200 теперь бывают разными, так что, увидев такое название где-нибудь в прайс-листе, имеет смысл присмотреться внимательно — что именно имеется в виду. Ключевое отличие — U.2 или AIC. Но не только.

Официальный анонс накопителей серий SN260 и SN200 состоялся еще в декабре 2016 года, но это нормально — жизненный цикл серверных продуктов намного длиннее, чем на розничном рынке. Тем более, что некоторые заявленные характеристики первого семейства до сих пор выглядят необычно — например, скорость чтения до 6170 МБ/с, что существенно превосходит возможности PCIe 3.0 x4. Но ничего удивительного — здесь как раз х8. А вот скорость записи воображение уже не поражает: 2200 МБ/с с точки зрения современности — это немного. Но нужно отдавать себе отчет в том, что таковая обеспечивается стабильно и независимо от количества записываемых данных или заполненности устройства. Иными словами, SLC-кэширование здесь не применяется, да и не нужно — используется «старая плоская» 15 нм MLC-память SanDisk с кристаллами по 128 Гбит. На данный момент и в корпоративном сегменте вовсю развернулось применение TLC и даже QLC, что многих пугает — вот можно успокоиться (если финансы позволяют, конечно). Тем более, что компания сразу анонсировала две подлинейки — с шагом 960 и 800 ГБ. Первая (соответственно 0,96/1,92/3,84/7,68 ТБ) обеспечивает покупателю более низкую цену хранения гигабайта информации. Вторая (0,8/1,6/3,2/6,4 ТБ) оптимизирована под более высокую производительность на Random Write — и вообще больший «разрешенный» объем записи тоже: 3 DWPD против 1 DWPD. Т. е. на доставшуюся нам модификацию каждый день можно записывать почти 10 ТБ данных — и так пять лет в режиме 24/7. В общей сложности — 17,5 ПБ данных. Для сравнения — столько же у Samsung 983 ZET 960 ГБ или Intel Optane SSD 905P 960 ГБ. Да, разумеется, здесь такие объемы — во многом результат высокой емкости, но она полезна и сама по себе. Тем более, что и цена примерно равна тому же 983 ZET на 960 ГБ или Optane на 1,5 ТБ — зато общая емкость 3,2 ТБ. Понятно, что за эти деньги можно «набрать» много бытовых терабайт — но бытовых. Сравнительно с одноклассниками же накопитель по цене гигабайта выглядит неплохо.

Тем более, не скоростью единой и/или количеством перезаписей выделяется. В частности, тут не экономили на защите от сбоев питания — причем по двум направлениям. Кэширование операций записи силами операционной системы DC SN200 попросту запрещает (так же делают и все Optane SSD, например), т. е. что записалось — то именно уже записалось. Как минимум, в кэш устройства — но для его сохранения в аварийной ситуации используются конденсаторы. Емкость таковых достаточна, чтобы записать во флэш все содержимое DRAM-буфера (емкость которого в данном случае исчисляется гигабайтами и при «стандартной» схеме мегабайт на каждый гигабайт флэша) и сохранить целостность таблицы трансляции адресов. Ранее иногда такие схемы применялись и в бытовых устройствах — сейчас же без них обходятся и многие накопители корпоративного сегмента, поскольку вместо аппаратного PLP производители активно используют более дешевые программные средства. Но «нравится» это далеко не всем пользователям, так что, опять же, наличие конденсаторов будет ими восприниматься положительно.

В общем, вкратце, устройство достаточно архаично — поскольку новой разработкой и не является. Однако эта «архаичность» как раз и привлекательна — MLC-память, PLP и т. п. Плюс «широкий» (а потому и быстрый) интерфейс. Плюс высокая емкость — за которую, разумеется, приходится платить очень дорого, однако в свое время это было верно и для тех же SCSI-винчестеров на 15К оборотов. Которые, тем не менее, приобретались некоторыми энтузиастами, поскольку ничего подобного в массовом сегменте и не было. А оправдан ли такой подход сейчас?
Образцы для сравнения

Если вспомнить — какой была «бытовуха» в начале 2017 года, становится понятно, что в ее рядах аналогов HGST Ultrastar SN260 (только-только выходящего на рынок) не было. Однако с тех пор утекло немало воды — и «кремния» тоже. Например, появились и стали доступными покупателям упомянутые выше Optane SSD — первые относительно массовые твердотельные накопители не на флэш-памяти, причем их емкость за прошедшее время достигла 1,5 ТБ. Дорого, конечно — но и WD Ultrastar DC SN200 (в обоих вариантах: и то, что раньше было SN200, и наш герой — экс-SN260) к дешевым ни в коей мере не относятся. Зато относительно недорого стоят уже «массовые» NVMe-устройства, в т. ч. и на базе недорогой TLC-памяти, производительность которых доведена до высокого уровня благодаря повышению интеллекта контроллеров. Таков, например, Samsung 970 Evo Plus, старшие модификации которого способны дать жару и более дорогим накопителям линейки 970 Pro (на базе MLC-памяти). А если вспомнить, что в типичных пользовательских сценариях накопители этой компании вообще одни из самых быстрых, возникает соблазн сравнить и это относительно недорогое устройство с гостем из иного мира.

Также мы никак не можем обойтись без Gigabyte Aorus NVMe Gen4 SSD емкостью 2 ТБ, благо используемый в нем контроллер Phison E16 имеет интерфейс PCIe 4.0 х4 — а по пропускной способности это как раз эквивалентно PCIe 3.0 x8. Правда, для того, чтобы воспользоваться этим, на данный момент придется воспользоваться и процессором AMD Ryzen «серии 3000» на плате с чипсетом AMD X570, но данный накопитель мы как раз тестировали и по «стандартной» методике, и по «аппаратно модифицированной» (плата MSI MEG X570 ACE, процессор Ryzen 7 3700X — остальное как обычно) - так что возьмем и те, и другие результаты. По сути, это нам даст три «бытовых» конфигурации и одну радикально от таковых отличную — Optane SSD «пришли» из других сегментов рынка, где чувствуют себя куда лучше, чем при необходимости конкурировать с массовыми моделями, но этого, как раз, и вполне достаточно для ориентации на местности.
Тестирование
Методика тестирования

Методика подробно описана в отдельной статье. Там можно познакомиться с используемым аппаратным и программным обеспечением.
Производительность в приложениях

Мы неоднократно говорили, что такие сценарии — лучшее, что может случиться в жизни бюджетных твердотельных накопителей. Как и следовало ожидать, и худшее, что можно придумать для дорогих :) «Блеснуть» способен только Optane, благодаря низким задержкам самой памяти, но и то — лишь в плане потенциальных возможностей, за которые требуется выкладывать вполне реальные деньги. И немудрено — программному обеспечению «тесно» в рамках жестких дисков, но все проблемы снимает любой SSD. А модели для корпоративного рынка и вовсе не оптимизированы для подобных сценариев использования. Есть подозрения, что, например, одного лишь жесткого запрета программного кэширования достаточно, чтобы превратить SN200 в аутсайдера. С чем он, конечно, по мере сил «борется» быстрой памятью, широким интерфейсом и т. д. и т. п., но все равно не может стать лучшим в быту.
Последовательные операции

Чтение в один поток выполняется быстро, но не более того — а вот если сымитировать «большую» нагрузку, так сразу становится понятно: зачем нужен PCIe 3.0 x8. Впрочем, формально сейчас можно обойтись и четырьмя линиями, но PCIe 4.0 — однако на деле Aorus Gen4 SSD намного медленнее (при той же теоретической пропускной способности интерфейса). При этом серверных (да и каких-либо еще) платформ с поддержкой PCIe 4.0 почитай и сейчас нет — зато 3.0 х8 найти можно много где. Откуда и выбор интерфейса подключения.

Казалось бы, «старая добрая» MLC-память должна обеспечивать высокую скорость записи, но на деле повторить успех чтения в синтетике не удалось. Виной тому, понятно, SLC-кэширование, сплошь и рядом используемое современной «бытовухой». Понятно, что в устоявшемся режиме в лидеры выйдут как раз Optane и DC SN200, поскольку такую (пусть и формально — не рекордную) скорость они могут обеспечивать в любой позиции любое время, а кэш быстро кончается... Но актуальным это является при использовании обоих по прямому назначению. Индивидуальному же пользователю «профит» нулевой.
Случайный доступ

Сильное место Optane — низкие задержки самой памяти, что полностью уничтожает конкуренцию на коротких очередях или при «без очереди». Однако большинству производителей эта «магия» недоступна, но «выжать» и из NAND-флэш можно много. Но при ограниченных объемах данных это не слишком помогает DC SN200, поскольку с таковыми отлично справляется SLC-кэш накопителей бытового сегмента. А при чтении данных — и он не слишком нужен, поскольку современная TLC-память по задержкам не хуже старой MLC. Опять же — SSD персонального назначения скорее спринтеры, чем стайеры: высокую производительность могут демонстрировать недолго. А Ultrastar DC SN200 на длительную нагрузку и рассчитан. Но мы-то как раз условились рассмотреть вопрос, чем он может быть полезен в ПК (или, максимум, рабочей станции), где таковых не бывает.
Работа с большими файлами

Повторить рекорд синтетики не удалось — не может типовая система воспользоваться всеми возможностями, которые предлагают 3,2 ТБ MLC-памяти с интерфейсом PCIe 3.0 x8. За ограничение четырех линий выбрались — но не так уж и далеко. Ускорение самих по себе линий, как видим, эффективнее.

Да и быстро записать 32 ГБ данных ныне может и «обычный порошок» — так что нет смысла гоняться за «необычным». Последний незаменим если писать и писать терабайты данных (причем не последовательно) — вот только это лежит слишком далеко от запросов обычного пользователя (пусть даже «продвинутого»).

Запись одновременно с чтением — тоже ничего по нынешним меркам особенного. В «случайном» режиме побыстрее, чем у прочих — но для более заметного эффекта нужно увеличить объем данных. А откуда их взять в персональной системе?
Рейтинги

Краткое содержание предыдущих серий :) SSD персонального назначения «заточены» под пиковые результаты при кратковременных нагрузках — благо в персональной системе других обычно и не водится. И хорошо «заточены» — конкурировать с ними в этом представители корпоративного сегмента не могут. Во многом и потому, что оптимизированы совсем под другие нагрузки. Которых в ПК обычно не бывает.

Тем не менее, медленным накопитель не назовешь — да таковым он и в принципе быть не может: благодаря наличию «грубой силы» в виде большого объема MLC-памяти, быстрому интерфейсу и способному «переварить» все это контроллеру.
Итого

Подбирая «конкурентов», мы, конечно, несколько слукавили — они все гораздо новее. В 2017 году, например, только-только появились первые Optane SSD, причем емкость их не достигала и 500 ГБ. Интерфейс PCIe 4.0 (позволяющий из четырех линий «выжать» столько же, сколько PCIe 3.0 имел на восьми) — вообще разработка этого года и все еще реализованная лишь в полутора платформах. Алгоритмы SLC-кэширования начали применяться в накопителях еще лет пять назад, но до ума довели их лишь недавно. Высокая емкость устройств хотя бы в части модификаций — тоже тенденция последнего времени: до сих пор многие линейки принципиально ограничены 1 ТБ. Поэтому уже относительно старый серверный SSD — такой, как Western Digital Ultrastar DC SN200 — даже на современном фоне смотрится внушительно. И уже может быть приобретен даже обычным пользователем ПК — были бы деньги (это в первое время таких устройств и для использования «по назначению» еле хватало). Но, пожалуй, именно «по назначению» его и есть смысл продолжать использовать. Работа накопителя в массовом ПК — много сна с редкими и короткими пиками активности. Собственно, под это и «заточены» в основной массе потребительские SSD: им не нужно справляться с длительной тяжелой нагрузкой, а требуется как раз быстро отрабатывать эти самые пики. Да и то — обычно не настолько большие, чтобы это стало проблемой хоть для какого-то устройства. Серверные накопители справляются и с такими нагрузками благодаря методу «грубой силы» (запаса которой хватает на много лет), но преимуществ в подобных сценариях не имеют.
